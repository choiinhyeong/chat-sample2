{"version":3,"file":"js/519.496d90b9.js","mappings":"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","sources":["webpack://frontend/./node_modules/eventemitter3/index.js","webpack://frontend/./node_modules/ua-parser-js/src/ua-parser.js","webpack://frontend/./src/views/ChatMng.vue","webpack://frontend/./node_modules/engine.io-parser/build/esm/commons.js","webpack://frontend/./node_modules/engine.io-parser/build/esm/encodePacket.browser.js","webpack://frontend/./node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","webpack://frontend/./node_modules/engine.io-parser/build/esm/decodePacket.browser.js","webpack://frontend/./node_modules/engine.io-parser/build/esm/index.js","webpack://frontend/./node_modules/@socket.io/component-emitter/index.mjs","webpack://frontend/./node_modules/engine.io-client/build/esm/globalThis.browser.js","webpack://frontend/./node_modules/engine.io-client/build/esm/util.js","webpack://frontend/./node_modules/engine.io-client/build/esm/transport.js","webpack://frontend/./node_modules/engine.io-client/build/esm/contrib/yeast.js","webpack://frontend/./node_modules/engine.io-client/build/esm/contrib/parseqs.js","webpack://frontend/./node_modules/engine.io-client/build/esm/contrib/has-cors.js","webpack://frontend/./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","webpack://frontend/./node_modules/engine.io-client/build/esm/transports/polling.js","webpack://frontend/./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","webpack://frontend/./node_modules/engine.io-client/build/esm/transports/websocket.js","webpack://frontend/./node_modules/engine.io-client/build/esm/transports/index.js","webpack://frontend/./node_modules/engine.io-client/build/esm/contrib/parseuri.js","webpack://frontend/./node_modules/engine.io-client/build/esm/socket.js","webpack://frontend/./node_modules/engine.io-client/build/esm/index.js","webpack://frontend/./node_modules/socket.io-client/build/esm/url.js","webpack://frontend/./node_modules/socket.io-parser/build/esm/is-binary.js","webpack://frontend/./node_modules/socket.io-parser/build/esm/binary.js","webpack://frontend/./node_modules/socket.io-parser/build/esm/index.js","webpack://frontend/./node_modules/socket.io-client/build/esm/on.js","webpack://frontend/./node_modules/socket.io-client/build/esm/socket.js","webpack://frontend/./node_modules/socket.io-client/build/esm/contrib/backo2.js","webpack://frontend/./node_modules/socket.io-client/build/esm/manager.js","webpack://frontend/./node_modules/socket.io-client/build/esm/index.js","webpack://frontend/./src/components/ConnectLiveConf.vue","webpack://frontend/./src/components/VoiceMeter.vue","webpack://frontend/./src/components/VoiceMeter.vue?015c","webpack://frontend/./src/components/RemoteVideo.vue","webpack://frontend/./src/components/RemoteVideo.vue?98f0","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/config.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/hash.js","webpack://frontend/./node_modules/jsonrpc-lite/dist/esnext/jsonrpc.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/indexer.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/user-agent.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/log-send.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/logger.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/error-exception.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/http-with-json-rpc.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/conference/auth-api-client.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/conference/room-api-client.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/json-rpc.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/noop.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/session/session.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/session/down-session.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/session/up-session.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/object-util.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/remote/remote.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/remote/remote-video.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/remote/remote-audio.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/participant/remote-participant.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/participant/local-participant.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/make-array.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/local/local.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/local/local-video.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/local/local-audio.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/local/local-media.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/remote/remote-audio-elements.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/local/local-screen.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/utils/room-event-enum.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/modules/conference/conference.js","webpack://frontend/./node_modules/@connectlive/connectlive-web-sdk/es6/index.js","webpack://frontend/./src/components/ConnectLiveConf.vue?6dec","webpack://frontend/./src/views/ChatMng.vue?c512"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.2\n   Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.2',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 255;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK   = 'Facebook';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY).replace(/\\s\\s*$/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,               // Avant/IEMobile/SlimBrowser\n            /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,                                  // Baidu Browser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /\\bqbcore\\/([\\w\\.]+)/i                                              // WeChat Desktop for Windows Built-in Browser\n            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /yabrowser\\/([\\w\\.]+)/i                                             // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 '+BROWSER]], [\n            /(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 '+BROWSER], VERSION], [                      // Oculus/Samsung/Sailfish Browser\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i            // QQBrowser/Baidu App/2345 Browser\n            ], [NAME, VERSION], [\n            /(metasr)[\\/ ]?([\\w\\.]+)/i,                                         // SouGouBrowser\n            /(lbbrowser)/i                                                      // LieBao Browser\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(chromium|instagram)[\\/ ]([-\\w\\.]+)/i                              // Chromium/Instagram\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.]+) .*mobile\\/\\w+ (safari)/i                        // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w\\.]+) .*(mobile ?safari|safari)/i                     // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, VERSION]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            // Ordered by popularity\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /\\((ip(?:hone|od)[\\w ]*);/i                                         // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}-[atu]?[ln][01259x][012359][an]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+)(?: bui|\\))/i,                                       // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[12]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ ([c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi)( bui|\\))/i,                                         // Kindle Fire without Silk\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w)( bui|\\))/i                                          // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w ]*; *(\\w[^;]*);([^;]*)/i               // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( 2)?)/i                                                     // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i           // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| safari)|pda(?=.+windows ce))/i              // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i                                       // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows) nt 6\\.2; (arm)/i,                                        // Windows RT\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,            // Windows Phone\n            /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, strMapper, windowsVersionMap]], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86)/i                              // Android-x86\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+ ([\\w\\.]+\\w)/i                                         // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,            // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _ua = ua || ((typeof window !== UNDEF_TYPE && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser.major = majorize(_browser.version);\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","<template>\r\n  <div class=\"home\" :style=\"`text-align:center; ${connected ? 'display:none;' : 'display:block;'}`\">\r\n    <h1>Home</h1>\r\n    <button type=\"button\" @click=\"moveFunc\">연결</button>\r\n  </div>\r\n  <div :style=\"`${connected ? 'display:flex' : 'display:none'}`\" >\r\n    <div class=\"wrap left-wrap\">\r\n      <div style=\"width: 100%; height:97%;\">\r\n        <div class=\"iframe-area\" ref=\"iframeAreaEl\"></div>\r\n        <div class=\"connect-area\" ref=\"connectAreaEl\" style=\"display: none;\">\r\n          <ConnectLiveConf v-if=\"isConnectLiveConf\"></ConnectLiveConf>\r\n        </div>\r\n      </div>\r\n      <div class=\"btnarea\" ref=\"btnAreaEl\" style=\"display: none; height:3%;\">\r\n        <!--        <button type=\"button\" class=\"iframe-btn\" @click=\"showIframe\">iframe</button>-->\r\n<!--        <button type=\"button\" @click=\"showQuiz\" ref=\"showQuizEl\">퀴즈앤</button>-->\r\n<!--        <button type=\"button\" class=\"yt-btn\" @click=\"youtubeFunc\">유튜브</button>-->\r\n        <button type=\"button\" @click=\"connectLiveFunc\">커넥트라이브_conf</button>\r\n<!--        <button type=\"button\" @click=\"freezeFunc\" ref=\"freezeEl\">채팅잠금</button>-->\r\n        <button type=\"button\" class=\"iframe-hide-btn\" @click=\"hideIframe\">화면 초기화</button>\r\n        <button type=\"button\" class=\"exitButtion\" @click=\"sendDisconnect\">퇴장</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"wrap right-wrap\">\r\n      <ul class=\"pages\">\r\n        <li class=\"chat page chatpage\" ref=\"chatPageEl\">\r\n          <div class=\"chatArea\">\r\n            <ul class=\"messages\" ref=\"messagesEl\"></ul>\r\n          </div>\r\n          <div>\r\n            <input class=\"inputMessage\" ref=\"inputMessageEl\" v-model=\"inputMessage\" @keyup.enter=\"sendMessage\" @keyup=\"updateTyping\" placeholder=\"메세지를 입력하세요.\"/>\r\n            <button type=\"button\" @click=\"sendMessage\">전송</button>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref} from \"vue\";\r\nimport io from 'socket.io-client'\r\nimport ConnectLiveConf from \"@/components/ConnectLiveConf\";\r\nimport {useStore} from \"vuex\";\r\nimport {ACT_GET_USERS_DECRYPT, ACT_GET_USERS_ENCRYPT} from \"@/store/modules/user/users\";\r\nimport {useRoute, useRouter} from \"vue-router\";\r\n\r\n\r\nexport default {\r\n  name: \"ChatMng\",\r\n  components:{\r\n    ConnectLiveConf,\r\n  },\r\n  setup(){\r\n\r\n    const store = useStore();\r\n\r\n    let socketDns = \"http://localhost:3000\";\r\n    // let socketDns = 'http://devlxp.kbstar.com'\r\n\r\n    let socket = io(socketDns, { transports: ['websocket'], path:'/websocket/chat' }); //채팅소켓\r\n    let socket2 = io(socketDns, { transports: ['websocket'], path:'/websocket/system' }); // 컨트롤소켓\r\n\r\n    const inputMessage = ref();\r\n    const iframeAreaEl = ref();\r\n    const connectAreaEl = ref();\r\n    const chatPageEl = ref();\r\n    const btnAreaEl = ref();\r\n    const messagesEl = ref();\r\n    const freezeEl = ref();\r\n    const inputMessageEl = ref();\r\n    const showQuizEl = ref();\r\n    const connected = ref(false);\r\n    const isConnectLiveConf = ref(false);\r\n\r\n    onMounted(() => {\r\n      // sendUserName();\r\n      console.log('mounted==>',localStorage.getItem('info'))\r\n      if(localStorage.getItem('info')===null ||\r\n          localStorage.getItem('info') ===undefined){\r\n        getUsersEncryptFunc();\r\n      }else{\r\n        getUsersDecryptFunc();\r\n        initUserData();\r\n        iframeHideFunc();\r\n      }\r\n    })\r\n\r\n    const userInfo = ref({\r\n      sendType:'',\r\n      socketId:'',\r\n      socketId2:'',\r\n      userName : '',\r\n      userSn: '',\r\n      channelNo : '',\r\n      lrnerId : '',\r\n      accTy: '',\r\n      message : '',\r\n      messageType : '',\r\n      url: '',\r\n    })\r\n\r\n    const initUserData = () => {\r\n      userInfo.value.sendType='';\r\n      userInfo.value.message='';\r\n      userInfo.value.messageType='';\r\n      userInfo.value.url='';\r\n    }\r\n\r\n    /**\r\n     * 클라이언트 이벤트\r\n     */\r\n    const sendUserName = () => {\r\n      // 퇴장클릭시 소켓 끊김으로 재연결\r\n      // if(socket.disconnected){\r\n      //   socket.connect();\r\n      //   socket2.connect();\r\n      // }\r\n      userInfo.value.sendType = 'connection'\r\n      userInfo.value.message = '입장'\r\n\r\n      socket.emit('chat_channel_connection', userInfo.value);\r\n      socket2.emit('message_channel_connection', userInfo.value);\r\n    }\r\n\r\n    const sendMessage = () => {\r\n      userInfo.value.sendType = 'message';\r\n      userInfo.value.message = inputMessage.value;\r\n\r\n      socket.emit('message', userInfo.value);\r\n      inputMessage.value = '';\r\n    }\r\n\r\n    const sendDisconnect = () => {\r\n      console.log('sendDisconnect-----------');\r\n      userInfo.value.sendType = 'disconnect';\r\n\r\n      socket.emit('disconnectCustom', userInfo.value);\r\n      socket2.emit('disconnectCustom', userInfo.value);\r\n      socket.disconnect();\r\n      socket2.disconnect();\r\n    }\r\n\r\n    /**\r\n     * socket이벤트\r\n     */\r\n    socket.on('chat_channel_connection', (data) => {\r\n      console.log('socket chat_channel_connection-----------',data)\r\n      userInfo.value.socketId = data.socketId;\r\n      let li = document.createElement('li')\r\n      li.innerText = data.userName + \"(\"+data.accTy+\")님이 \\\"\"+data.channelNo+\"\\\"채널에 입장했습니다.\";\r\n      messagesEl.value.append(li);\r\n      connected.value = true;\r\n      getRedisUsersList();\r\n\r\n      chatPageEl.value.style.display='flex'\r\n      if(data.accTy === 'admin') btnAreaEl.value.style.display='block'\r\n    });\r\n\r\n    socket.on('message', (data) => {\r\n      console.log('messsage===>',data)\r\n      let li = document.createElement('li')\r\n      li.innerText = data.userName + \"  : \" + data.message;\r\n      messagesEl.value.scrollTop = messagesEl.value.scrollHeight;\r\n      messagesEl.value.append(li);\r\n    });\r\n\r\n    socket.on('disconnect', (data) => {\r\n      console.log('disconnect-----------', data)\r\n      window.localStorage.removeItem('info');\r\n      connected.value = false;\r\n      location.reload(true);\r\n      // window.close();\r\n    });\r\n\r\n    socket.on('disconnectCustom', (data) => {\r\n      console.log('disconnectCustom--------------', data)\r\n      let li = document.createElement('li')\r\n      li.innerText = data.userinfo.userName + \"님이 퇴장하였습니다.\";\r\n      messagesEl.value.append(li);\r\n      getRedisUsersList();\r\n    });\r\n\r\n    /**\r\n     * socket2(system)\r\n     */\r\n    socket2.on('message_channel_connection', (data) => {\r\n      console.log('socket2 message_channel_connection----------------', data)\r\n      userInfo.value.socketId2 = data.socketId2;\r\n    });\r\n\r\n    socket2.on('disconnect', () => {\r\n      console.log('socket2 disconnect---------------')\r\n    });\r\n\r\n    socket2.on('disconnectCustom', () => {\r\n      console.log('socket2 disconnectCustom--------------')\r\n    });\r\n\r\n    socket2.on('message', (data) => {\r\n      console.log('socket2 message-------------------', data);\r\n      if (data.messageType === 'youtube') {\r\n        window.open('https://www.youtube.com/', '_blank');\r\n      } else if (data.messageType === 'iframeShow') {\r\n        iframeAreaEl.value.innerHTML = '<iframe width=\"100%\" height=\"100%\" src=\"https://www.youtube.com/embed/F2bMUR6GyNM\" title=\"YouTube video player\" frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>';\r\n        iframeShowFunc();\r\n      } else if (data.messageType === 'iframeHide') {\r\n        iframeHideFunc();\r\n      }else if(data.messageType === 'quizn'){\r\n        // iframeAreaEl.value.innerHTML = '<iframe width=\"100%\" height=\"100%\" src=\"'+data.url+'\" title=\"quizn\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>';\r\n        window.open(data.url)\r\n      }else if(data.messageType === 'freeze'){\r\n        if(!inputMessageEl.value.disabled){\r\n          inputMessageEl.value.disabled = true;\r\n          freezeEl.value.innerText = '해제'\r\n        }else{\r\n          inputMessageEl.value.disabled = false;\r\n          freezeEl.value.innerText = '잠금'\r\n        }\r\n      }else if(data.messageType === 'connectLiveConf') {\r\n        isConnectLiveConf.value = true;\r\n        connectLiveShowFunc();\r\n      }else if(data.messageType === 'getUser'){\r\n        alert(data.res)\r\n      }\r\n    });\r\n\r\n    /**\r\n     * 기능 함수들\r\n     */\r\n    const connectLiveFunc = () => {\r\n      userInfo.value.sendType='message';\r\n      userInfo.value.messageType='connectLiveConf'\r\n\r\n      socket2.emit('message', userInfo.value);\r\n    }\r\n\r\n    const showQuiz = () => {\r\n      userInfo.value.sendType='message';\r\n      userInfo.value.messageType='quizn'\r\n      userInfo.value.url = 'https://quizn.show/p/'\r\n\r\n      socket2.emit('message', userInfo.value);\r\n    }\r\n\r\n    const showIframe = () => {\r\n      userInfo.value.sendType='message';\r\n      userInfo.value.messageType='iframeShow'\r\n\r\n      socket2.emit('message', userInfo.value);\r\n    }\r\n\r\n    const hideIframe = () => {\r\n      userInfo.value.sendType='message';\r\n      userInfo.value.messageType='iframeHide'\r\n\r\n      socket2.emit('message', userInfo.value);\r\n    }\r\n\r\n    const youtubeFunc = () => {\r\n      userInfo.value.sendType='message';\r\n      userInfo.value.messageType='youtube'\r\n\r\n      socket2.emit('message', userInfo.value);\r\n    }\r\n\r\n    const freezeFunc = () => {\r\n      userInfo.value.sendType='message';\r\n      userInfo.value.messageType='freeze'\r\n\r\n      socket2.emit('message', userInfo.value);\r\n    }\r\n\r\n    /**\r\n     * 기타 이벤트함수들\r\n     */\r\n    const updateTyping = () => {\r\n      let typing = true;\r\n      if (connected.value) {\r\n        if (!typing) {\r\n          typing = true;\r\n          socket.emit('typing');\r\n        }\r\n        let lastTypingTime = (new Date()).getTime();\r\n\r\n        setTimeout(() => {\r\n          let typingTimer = (new Date()).getTime();\r\n          let timeDiff = typingTimer - lastTypingTime;\r\n          if (timeDiff >= 400 && typing) {\r\n            socket.emit('stop typing');\r\n            typing = false;\r\n          }\r\n        }, 400);\r\n      }\r\n    }\r\n\r\n    const iframeShowFunc = () => {\r\n      iframeAreaEl.value.style.display = 'block';\r\n      connectAreaEl.value.style.display = 'none';\r\n    }\r\n\r\n    const connectLiveShowFunc = () => {\r\n      iframeAreaEl.value.style.display = 'none';\r\n      connectAreaEl.value.style.display = 'block';\r\n    }\r\n\r\n    const iframeHideFunc = () => {\r\n      iframeAreaEl.value.innerHTML = '';\r\n      iframeAreaEl.value.style.display = 'none';\r\n      connectAreaEl.value.style.display = 'none';\r\n      isConnectLiveConf.value = false;\r\n    }\r\n\r\n    // 유저 정보 복호화 후 세팅\r\n    const getUsersDecryptFunc = () => {\r\n      store.dispatch(`users/${ACT_GET_USERS_DECRYPT}`, localStorage.getItem('info'))\r\n          .then((res) => {\r\n            // console.log('res====>',res)\r\n            if (res.status === 200) {\r\n              console.log('200=>',res.data)\r\n              userInfo.value.userName = res.data.lrnerNm;\r\n              userInfo.value.userSn = res.data.userSn;\r\n              userInfo.value.lrnerId = res.data.lrnerId;\r\n              userInfo.value.accTy = res.data.accTy;\r\n              userInfo.value.channelNo = res.data.lrnerId; // 방장의 아이디가 채널아이디(임시)\r\n\r\n              sendUserName();\r\n            }\r\n          }).catch(e => {\r\n        console.error(e);\r\n      });\r\n    }\r\n\r\n    // 레디스에서 회원정보를 가져온다.\r\n    const getRedisUsersList = () => {\r\n      // store.dispatch(`users/${ACT_GET_REDIS_USERS_LIST}`, userInfo.value.channelNo)\r\n      //     .then((res) => {\r\n      //       console.log('getRedisUsersList====>',res)\r\n      //       // if (res.status === 200) {}\r\n      //     }).catch(e => {\r\n      //   console.error(e);\r\n      // });\r\n    }\r\n\r\n    /**\r\n     * HomeMng.vue함수\r\n     */\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const moveFunc = () => {\r\n      console.log('moveFunc')\r\n      localStorage.setItem('info', route.params.encrypt);\r\n      // window.open(rou.href);\r\n      // window.open('/chat')\r\n\r\n      let rou = router.resolve({name: 'ChatMng'})\r\n      location.href = rou.href\r\n    }\r\n    const getUsersEncryptFunc = () => {\r\n      store.dispatch(`users/${ACT_GET_USERS_ENCRYPT}`, {\r\n        accTy:'admin',\r\n        userSn:'65795',\r\n        lrnerId:'S017347',\r\n        lrnerNm: '김상민'\r\n        // 추가정보들 더 들어가야됨\r\n      }).then((res) => {\r\n        if (res.status === 200) {\r\n          route.params.encrypt = res.data;\r\n        }\r\n      }).catch(e => {\r\n        console.error(e);\r\n      });\r\n    }\r\n\r\n    return {\r\n      inputMessage,\r\n      iframeAreaEl,\r\n      connectAreaEl,\r\n      chatPageEl,\r\n      btnAreaEl,\r\n      messagesEl,\r\n      freezeEl,\r\n      inputMessageEl,\r\n      showQuizEl,\r\n      isConnectLiveConf,\r\n      userInfo,\r\n\r\n      sendUserName,\r\n      sendMessage,\r\n      sendDisconnect,\r\n      showQuiz,\r\n      showIframe,\r\n      hideIframe,\r\n      youtubeFunc,\r\n      freezeFunc,\r\n      getUsersEncryptFunc,\r\n      getUsersDecryptFunc,\r\n      connectLiveFunc,\r\n      updateTyping,\r\n      getRedisUsersList,\r\n\r\n      moveFunc,\r\n      connected,\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n/* add css */\r\n.iframe-area, .connect-area{\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  /*display: none;*/\r\n}\r\n\r\n.wrap{\r\n  display: flex;\r\n  flex-direction: column;\r\n  /*flex-direction: row;*/\r\n  height: 100vh;\r\n  border: 2px solid lightgray;\r\n  border-radius: 5px;\r\n}\r\n\r\n.left-wrap{\r\n  width: 60%;\r\n}\r\n\r\n.right-wrap{\r\n  width:40%;\r\n}\r\n\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nhtml {\r\n  font-weight: 300;\r\n  -webkit-font-smoothing: antialiased;\r\n}\r\n\r\nhtml, input {\r\n  font-family:\r\n      \"HelveticaNeue-Light\",\r\n      \"Helvetica Neue Light\",\r\n      \"Helvetica Neue\",\r\n      Helvetica,\r\n      Arial,\r\n      \"Lucida Grande\",\r\n      sans-serif;\r\n}\r\n\r\nhtml, body {\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nul {\r\n  list-style: none;\r\n  word-wrap: break-word;\r\n}\r\n\r\n/* Pages */\r\n\r\n.pages {\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n\r\n.page {\r\n  height: 100%;\r\n  position: absolute;\r\n  width: 100%;\r\n}\r\n\r\n/* Chat page */\r\n\r\n.chat.page {\r\n  /*display: none;*/\r\n  flex-direction: column;\r\n}\r\n\r\n/* Font */\r\n\r\n.messages {\r\n  font-size: 100%;\r\n}\r\n\r\n.inputMessage {\r\n  font-size: 100%;\r\n}\r\n\r\n.log {\r\n  color: gray;\r\n  font-size: 70%;\r\n  margin: 5px;\r\n  text-align: center;\r\n}\r\n\r\n/* Messages */\r\n\r\n.chatArea {\r\n  height: 91%;\r\n}\r\n\r\n.messages {\r\n  height: 100%;\r\n  margin: 0;\r\n  overflow-y: scroll;\r\n  padding: 10px 20px 10px 20px;\r\n}\r\n\r\n.message.typing .messageBody {\r\n  color: gray;\r\n}\r\n\r\n.username {\r\n  font-weight: 700;\r\n  overflow: hidden;\r\n  padding-right: 15px;\r\n  text-align: right;\r\n}\r\n\r\n/* Input */\r\n\r\n.inputMessage {\r\n  border: 1px solid gray;\r\n  bottom: 0;\r\n  height: 60px;\r\n  left: 0;\r\n  outline: none;\r\n  padding-left: 10px;\r\n  margin-right: 5px;\r\n  right: 0;\r\n  width: 85%;\r\n}\r\n\r\n\r\n</style>","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + content);\n    };\n    return fileReader.readAsDataURL(data);\n};\nexport default encodePacket;\n","const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            return data instanceof ArrayBuffer ? new Blob([data]) : data;\n        case \"arraybuffer\":\n        default:\n            return data; // assuming the data is already an ArrayBuffer\n    }\n};\nexport default decodePacket;\n","import encodePacket from \"./encodePacket.js\";\nimport decodePacket from \"./decodePacket.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nclass TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} options.\n     * @api private\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.readyState = \"\";\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @api protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     *\n     * @api public\n     */\n    open() {\n        if (\"closed\" === this.readyState || \"\" === this.readyState) {\n            this.readyState = \"opening\";\n            this.doOpen();\n        }\n        return this;\n    }\n    /**\n     * Closes the transport.\n     *\n     * @api public\n     */\n    close() {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     * @api public\n     */\n    send(packets) {\n        if (\"open\" === this.readyState) {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @api protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @api protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @api protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @api protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n}\n","// imported from https://github.com/unshiftio/yeast\n'use strict';\nconst alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};\nlet seed = 0, i = 0, prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nexport function encode(num) {\n    let encoded = '';\n    do {\n        encoded = alphabet[num % length] + encoded;\n        num = Math.floor(num / length);\n    } while (num > 0);\n    return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nexport function decode(str) {\n    let decoded = 0;\n    for (i = 0; i < str.length; i++) {\n        decoded = decoded * length + map[str.charAt(i)];\n    }\n    return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nexport function yeast() {\n    const now = encode(+new Date());\n    if (now !== prev)\n        return seed = 0, prev = now;\n    return now + '.' + encode(seed++);\n}\n//\n// Map each character to its index.\n//\nfor (; i < length; i++)\n    map[alphabet[i]] = i;\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encode } from \"../contrib/parseqs.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { XHR as XMLHttpRequest } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false\n    });\n    return null != xhr.responseType;\n})();\nexport class Polling extends Transport {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        this.polling = false;\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n            this.xs = opts.secure !== isSSL;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    /**\n     * Transport name.\n     */\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @api private\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} callback upon buffers are flushed and transport is paused\n     * @api private\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @api public\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @api private\n     */\n    onData(data) {\n        const callback = packet => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @api private\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} data packets\n     * @param {Function} drain callback\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, data => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        let port = \"\";\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n                (\"http\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        const encodedQuery = encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @api private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @api private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @api private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @api public\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.async = false !== opts.async;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @api private\n     */\n    create() {\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        opts.xscheme = !!this.opts.xs;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, this.async);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @api private\n     */\n    onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @api private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @api private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this.cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @api public\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return cb => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport { encode } from \"../contrib/parseqs.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { defaultBinaryType, nextTick, usingBrowserWebSocket, WebSocket } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @api {Object} connection options\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Transport name.\n     *\n     * @api public\n     */\n    get name() {\n        return \"websocket\";\n    }\n    /**\n     * Opens socket.\n     *\n     * @api private\n     */\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @api private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = closeEvent => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent\n        });\n        this.ws.onmessage = ev => this.onData(ev.data);\n        this.ws.onerror = e => this.onError(\"websocket error\", e);\n    }\n    /**\n     * Writes data to socket.\n     *\n     * @param {Array} array of packets.\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, data => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    /**\n     * Closes socket.\n     *\n     * @api private\n     */\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        let port = \"\";\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n                (\"ws\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        const encodedQuery = encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @api public\n     */\n    check() {\n        return !!WebSocket;\n    }\n}\n","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nexport const transports = {\n    websocket: WS,\n    polling: Polling\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri or options\n     * @param {Object} opts - options\n     * @api public\n     */\n    constructor(uri, opts = {}) {\n        super();\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parse(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\"polling\", \"websocket\"];\n        this.readyState = \"\";\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024\n            },\n            transportOptions: {},\n            closeOnBeforeunload: true\n        }, opts);\n        this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                addEventListener(\"beforeunload\", () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                }, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\", {\n                        description: \"network connection lost\"\n                    });\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} transport name\n     * @return {Transport}\n     * @api private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts.transportOptions[name], this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port\n        });\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @api private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @api private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", reason => this.onClose(\"transport close\", reason));\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} transport name\n     * @api private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", msg => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = err => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        transport.open();\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @api private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState &&\n            this.opts.upgrade &&\n            this.transport.pause) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @api private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.resetPingTimeout();\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @api private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @api private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @api private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @api private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} message.\n     * @param {Function} callback function.\n     * @param {Object} options.\n     * @return {Socket} for chaining.\n     * @api public\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @api private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     *\n     * @api public\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @api private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @api private\n     */\n    onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} server upgrades\n     * @api private\n     *\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport const protocol = Socket.protocol;\nexport { Transport } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && payload.length > 0;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     *\n     * @public\n     */\n    constructor(io, nsp, opts) {\n        super();\n        this.connected = false;\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for connect()\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @return self\n     * @public\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        const timeout = this.flags.timeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this.packet({ type: PacketType.CONNECT, data });\n            });\n        }\n        else {\n            this.packet({ type: PacketType.CONNECT, data: this.auth });\n        }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    const id = packet.data.sid;\n                    this.onconnect(id);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id) {\n        this.id = id;\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * ```\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     * ```\n     *\n     * @returns self\n     * @public\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     *\n     * <pre><code>\n     *\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(event);\n     * });\n     *\n     * </pre></code>\n     *\n     * @public\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     *\n     * <pre><code>\n     *\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(event);\n     * });\n     *\n     * </pre></code>\n     *\n     * @public\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     *\n     * <pre><code>\n     *\n     * const handler = (event, ...args) => {\n     *   console.log(event);\n     * }\n     *\n     * socket.onAnyOutgoing(handler);\n     *\n     * // then later\n     * socket.offAnyOutgoing(handler);\n     *\n     * </pre></code>\n     *\n     * @public\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on(socket, \"error\", (err) => {\n            self.cleanup();\n            self._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                socket.close();\n                // @ts-ignore\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        this.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","<template>\r\n  <div class=\"container flex column\">\r\n    <header>\r\n      <input type=\"text\" v-model=\"confName\" :disabled=\"isConnected\" />\r\n      <button @click=\"onConnect\" v-if=\"!isConnected\">연결하기</button>\r\n      <button @click=\"onDisConnectConference\" v-if=\"isConnected\">연결해제하기</button>\r\n      <button @click=\"onCreateLocalScreen\" v-if=\"isConnected && !localScreen\">화면공유적용</button>\r\n      <button @click=\"onDestroyLocalScreen\" v-if=\"isConnected && localScreen\">화면공유해제</button>\r\n\r\n      <div style=\"display:inline-block;\" v-if=\"isConnected\">\r\n        <select id=\"camaraSource\">\r\n          <option v-for=\"(item, index) in cameraDevices\" :key=\"index\" :value=\"item.deviceId\">{{item.label}}</option>\r\n        </select>\r\n        <button @click=\"onChangeCamera\">카메라변경</button>\r\n      </div>\r\n\r\n    </header>\r\n    <div class=\"flex row\">\r\n      <div class=\"media-list\">\r\n        <div class=\"media-block\" v-if=\"localMedia\">\r\n          <div class=\"participant-id\">{{myId}}</div>\r\n          <div class=\"local-container\" @click=\"onClickSpotlight\"></div>\r\n        </div>\r\n\r\n        <div\r\n            class=\"media-block\"\r\n            v-for=\"(item, i) in remoteParticipants\"\r\n            :key=\"i\"\r\n            :id=\"item.participant.id\"\r\n            @click=\"onClickSpotlight\"\r\n        >\r\n          <div class=\"participant-id\">{{item.participant.id}}</div>\r\n          <voice-meter :level=\"item.level\" />\r\n          <remote-video v-for=\"(video, j) in item.videos\" :key=\"j\" autoplay :remoteVideo=\"video\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"spotlight\">\r\n        <video id=\"spotlight-video\" autoplay playsInline></video>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport voiceMeter from './VoiceMeter.vue';\r\nimport remoteVideo from './RemoteVideo.vue';\r\nimport ConnectLive from '@connectlive/connectlive-web-sdk';\r\nimport {ref, nextTick} from \"vue\";\r\n\r\nexport default {\r\n  name: \"ConnectLiveConf\",\r\n  components: {\r\n    voiceMeter,\r\n    remoteVideo\r\n  },\r\n  setup(){\r\n    const confName = ref('icl2-test-room');\r\n    const conf = ref(null);\r\n    const localMedia = ref(null);\r\n    const localScreen = ref(null);\r\n    const remoteParticipants = ref([]);\r\n    const isConnected = ref(false);\r\n    const myId = ref('');\r\n    const cameraDevices = ref([]);\r\n    const audioCheckInterval = ref(-1);\r\n\r\n    const onProvisioning = async() => {\r\n      await ConnectLive.signIn({\r\n        serviceId: '2022KBH0C8AZ',\r\n        serviceKey: '2022KBH0C8AZ42PO',\r\n        secret: 'w7kvrnnCNVjBzjdR'\r\n      });\r\n    };\r\n\r\n    const onConnect = async() => {\r\n      await onProvisioning();\r\n      await onCreateLocalMedia();\r\n      await onCreateConference();\r\n      await conf.value.connect(confName.value);\r\n\r\n      myId.value = conf.value.localParticipant.id;\r\n      isConnected.value = true;\r\n      conf.value.publish([localMedia.value]);\r\n\r\n      audioCheckInterval.value = window.setInterval(()=>{\r\n        const audioLevels = conf.value.getRemoteAudioLevels();\r\n        audioLevels.remoteParticipants.forEach((audioParticipant)=>{\r\n          const participant = remoteParticipants.value.find(participant => participant.participant.id === audioParticipant.remoteParticipant.id);\r\n\r\n          let level = parseFloat(audioParticipant.level.toFixed(3));\r\n          if(level > 0.15) {\r\n            level = 0.15;\r\n          }\r\n\r\n          participant.level = level / 0.15 * 100;\r\n        });\r\n      }, 250);\r\n    }\r\n\r\n    const onCreateLocalMedia = async() => {\r\n      localMedia.value = await ConnectLive.createLocalMedia({\r\n        audio: true,\r\n        video: true\r\n      });\r\n\r\n      // await onCreateLocalMediaCallback();\r\n      nextTick(async() => {\r\n        const video = localMedia.value.video.attach();\r\n        video.className = 'local-video';\r\n        video.style.width = '100%';\r\n        document.querySelector('.local-container').appendChild(video);\r\n\r\n        cameraDevices.value = await localMedia.value.getCameraDevices();\r\n      });\r\n    }\r\n\r\n    const onCreateLocalScreen = async() => {\r\n      localScreen.value = await ConnectLive.createLocalScreen({\r\n        audio: true,\r\n        video: true\r\n      });\r\n      localScreen.value.video.setExtraValue('screen');\r\n\r\n      const video = localScreen.value.video.attach();\r\n      video.className = 'local-video';\r\n      video.style.width = '100%';\r\n      document.querySelector('.local-container').appendChild(video);\r\n\r\n      conf.value.publish([localScreen.value]);\r\n    };\r\n\r\n    const onCreateConference = async() => {\r\n      conf.value = ConnectLive.createConference();\r\n\r\n      conf.value.on('connected', (evt)=>{\r\n\r\n        evt.remoteParticipants.forEach(async participant => {\r\n          let remoteVideos = [];\r\n          const unsubscribedVideos = participant.getUnsubscribedVideos();\r\n          if (unsubscribedVideos.length) {\r\n            const videoIds = unsubscribedVideos.map(video => video.getVideoId());\r\n            remoteVideos = await conf.value.subscribe(videoIds);\r\n          }\r\n\r\n          remoteParticipants.value.push({\r\n            participant: participant,\r\n            videos: remoteVideos,\r\n            level: 0\r\n          });\r\n        });\r\n      });\r\n\r\n      conf.value.on('participantEntered', (evt)=>{\r\n        remoteParticipants.value.push({\r\n          participant: evt.remoteParticipant,\r\n          videos: [],\r\n          level: 0\r\n        });\r\n      });\r\n\r\n      conf.value.on('participantLeft', evt => {\r\n        const index = remoteParticipants.value.findIndex(item => item.participant.id === evt.remoteParticipantId);\r\n        remoteParticipants.value.splice(index, 1);\r\n      });\r\n\r\n      conf.value.on('remoteVideoPublished', async evt => {\r\n        const remoteVideos = await conf.value.subscribe([evt.remoteVideo.videoId]);\r\n        if (remoteVideos.length) {\r\n          const participant = remoteParticipants.value.find(item => item.participant.id === evt.remoteParticipant.id);\r\n          if(participant) {\r\n            participant.videos = participant.videos.concat(remoteVideos);\r\n          }\r\n        }\r\n      });\r\n\r\n      conf.value.on('remoteVideoUnpublished', evt => {\r\n        const participant = remoteParticipants.value.find(item => item.participant.id === evt.remoteParticipant.id);\r\n        if(participant) {\r\n          participant.videos = participant.videos.filter((remoteVideo)=>{\r\n            return remoteVideo.videoId !== evt.remoteVideo.videoId;\r\n          });\r\n        }\r\n      });\r\n    };\r\n\r\n    const onDisConnectConference = async() => {\r\n      conf.value.disconnect();\r\n\r\n      localMedia.value.stop();\r\n      localMedia.value.video.detach();\r\n\r\n      localMedia.value = null;\r\n\r\n      if(localScreen.value) {\r\n        localScreen.value.stop();\r\n        localScreen.value.video.detach();\r\n        localScreen.value = null;\r\n      }\r\n\r\n      isConnected.value = false;\r\n      myId.value = '';\r\n      remoteParticipants.value = [];\r\n      window.clearInterval(audioCheckInterval.value);\r\n      audioCheckInterval.value = -1;\r\n\r\n      ConnectLive.signOut();\r\n    };\r\n\r\n    const onDestroyLocalScreen = async() => {\r\n      localScreen.value.video.detach();\r\n      localScreen.value.stop();\r\n\r\n      conf.value.unpublish([localScreen.value]);\r\n\r\n      localScreen.value = undefined;\r\n    };\r\n\r\n    const onChangeCamera = async() => {\r\n      localMedia.value.video.detach();\r\n\r\n      const camaraSource = document.getElementById('camaraSource');\r\n      await localMedia.value.switchCamera(camaraSource.value);\r\n\r\n      const video = localMedia.value.video.attach();\r\n      video.className = 'local-video';\r\n      video.style.width = '100%';\r\n      document.querySelector('.local-container').appendChild(video);\r\n    };\r\n\r\n    const onClickSpotlight = async(event) => {\r\n      const target = event.target;\r\n      console.log('srcObject;;;', target.srcObject);\r\n      const remoteParticipant = conf.value.remoteParticipants.find(participant => participant.id === target.dataset.participantid);\r\n      if (remoteParticipant) {\r\n        const t = remoteParticipant.getVideo(parseInt(target.dataset.videoid));\r\n        t.setQuality('h');\r\n      }\r\n      console.log('show===>',target.srcObject)\r\n      document.getElementById('spotlight-video').srcObject = target.srcObject;\r\n    };\r\n\r\n    return {\r\n      confName,\r\n      conf,\r\n      localMedia,\r\n      localScreen,\r\n      remoteParticipants,\r\n      isConnected,\r\n      myId,\r\n      cameraDevices,\r\n      audioCheckInterval,\r\n\r\n      onConnect,\r\n      onProvisioning,\r\n      onCreateLocalMedia,\r\n      onCreateLocalScreen,\r\n      onCreateConference,\r\n      onDisConnectConference,\r\n      onDestroyLocalScreen,\r\n      onClickSpotlight,\r\n      onChangeCamera,\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .container {\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background-color: #101523;\r\n    color: #fff;\r\n  }\r\n\r\n  input {\r\n    line-height: 1.5;\r\n    padding: 8px;\r\n    border: 1px solid hsl(0, 0%, 10%);\r\n    color: #fff;\r\n    background: hsl(0, 0%, 14%);\r\n    transition: background-color 0.3s cubic-bezier(0.57, 0.21, 0.69, 1.25),\r\n    transform 0.3s cubic-bezier(0.57, 0.21, 0.69, 1.25);\r\n  }\r\n\r\n  button {\r\n    background: rgba(255, 255, 255, 0.1);\r\n    color: #fff;\r\n    border: 0;\r\n    cursor: pointer;\r\n    margin: 10px;\r\n    padding: 10px;\r\n  }\r\n\r\n  video {\r\n    cursor: pointer;\r\n  }\r\n\r\n  .flex {\r\n    display: flex;\r\n    flex: 1;\r\n    height: 100%;\r\n  }\r\n\r\n  .flex.column {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .flex.row {\r\n    flex-direction: row;\r\n  }\r\n\r\n  header {\r\n    height: 55px;\r\n    padding: 3px 20px;\r\n    border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n    text-align: left;\r\n  }\r\n\r\n  .spotlight {\r\n    width: 100%;\r\n    padding: 10px;\r\n  }\r\n\r\n  .spotlight video {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .media-list {\r\n    width: 300px;\r\n    padding: 10px;\r\n    border-right: 1px solid rgba(255, 255, 255, 0.1);\r\n    overflow: auto;\r\n  }\r\n\r\n  .media-list .media-block {\r\n    position: relative;\r\n    margin-top: 5px;\r\n    padding: 10px;\r\n    border: 1px solid #c9c9c9;\r\n    background-color: rgba(255, 255, 255, 0.1);\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .participant-id {\r\n    position: absolute;\r\n    bottom: 5px;\r\n    left: 5px;\r\n    color: #fff;\r\n    font-size: 12px;\r\n  }\r\n</style>","<template>\n  <div class=\"containerStyle\">\n    <div class=\"barStyle\" :style=\"{height: level2 + 'px'}\"></div>\n    <div class=\"barStyle\" :style=\"{height: level1 + 'px'}\"></div>\n    <div class=\"barStyle\" :style=\"{height: level2 + 'px'}\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['level'],\n  data() {\n    return {\n      level1: 0,\n      level2: 0\n    };\n  },\n  watch: {\n    level() {\n      const edited = this.level > 10 ? this.level : 0;\n      this.level1 = this.scaleUp(edited, 100, 30);\n      this.level2 = this.scaleUp(edited, 100, 20);\n    }\n  },\n  methods: {\n    scaleUp(value, total, max) {\n      const val = (value / total * max);\n      return val < 2 ? 2 : val;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.containerStyle {\n  width: 28px;\n  height: 28px;\n  background-color: yellow;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: black;\n  position: absolute;\n  left: 5px;\n  top: 5px;\n}\n\n.barStyle {\n  width: 3px;\n  border-radius: 3px;\n  background-color: black;\n  transition: height 0.1s linear;\n  will-change: height;\n  margin-left: 1px;\n}\n</style>\n","import { render } from \"./VoiceMeter.vue?vue&type=template&id=1656b306&scoped=true\"\nimport script from \"./VoiceMeter.vue?vue&type=script&lang=js\"\nexport * from \"./VoiceMeter.vue?vue&type=script&lang=js\"\n\nimport \"./VoiceMeter.vue?vue&type=style&index=0&id=1656b306&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\IdeaProjects\\\\chat-sample2\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1656b306\"]])\n\nexport default __exports__","<template>\n  <video class=\"remote-video\"></video>\n</template>\n\n<script>\nexport default {\n  props: ['remoteVideo'],\n  mounted() {\n    this.$el.srcObject = this.remoteVideo.getMediaStream();\n  }\n}\n</script>\n\n<style scoped>\nvideo {\n  width: 100%;\n}\n</style>\n","import { render } from \"./RemoteVideo.vue?vue&type=template&id=0b0d1571&scoped=true\"\nimport script from \"./RemoteVideo.vue?vue&type=script&lang=js\"\nexport * from \"./RemoteVideo.vue?vue&type=script&lang=js\"\n\nimport \"./RemoteVideo.vue?vue&type=style&index=0&id=0b0d1571&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\IdeaProjects\\\\chat-sample2\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b0d1571\"]])\n\nexport default __exports__","export const SDK_VERSION = '0.0.31';\nexport const PROVISIONING_SERVER_URL = 'https://icl2-provisioning-dev.k9ertc.io';\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const hash = (message) => __awaiter(void 0, void 0, void 0, function* () {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(message);\n    const hashArray = yield crypto.subtle.digest('SHA-256', data);\n    // ref: https://stackoverflow.com/questions/40031688/javascript-arraybuffer-to-hex\n    return [...new Uint8Array(hashArray)].map(x => x.toString(16).padStart(2, '0')).join('');\n});\n","// **Github:** https://github.com/teambition/jsonrpc-lite\n//\n// http://www.jsonrpc.org/specification\n// **License:** MIT\n'use strict';\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst isInteger = typeof Number.isSafeInteger === 'function'\n    ? Number.isSafeInteger // ECMAScript 2015\n    : function (num) {\n        return typeof num === 'number' && isFinite(num) && num === Math.floor(num) && Math.abs(num) <= 9007199254740991;\n    };\nexport class JsonRpc {\n    constructor() {\n        this.jsonrpc = '2.0';\n    }\n    serialize() {\n        return JSON.stringify(this);\n    }\n}\nJsonRpc.VERSION = '2.0';\nexport class RequestObject extends JsonRpc {\n    constructor(id, method, params) {\n        super();\n        this.id = id;\n        this.method = method;\n        if (params !== undefined) {\n            this.params = params;\n        }\n    }\n}\nexport class NotificationObject extends JsonRpc {\n    constructor(method, params) {\n        super();\n        this.method = method;\n        if (params !== undefined) {\n            this.params = params;\n        }\n    }\n}\nexport class SuccessObject extends JsonRpc {\n    constructor(id, result) {\n        super();\n        this.id = id;\n        this.result = result;\n    }\n}\nexport class ErrorObject extends JsonRpc {\n    // tslint:disable-next-line:no-shadowed-variable\n    constructor(id, error) {\n        super();\n        this.id = id;\n        this.error = error;\n        this.id = id;\n        this.error = error;\n    }\n}\nexport class JsonRpcParsed {\n    constructor(payload, type) {\n        this.payload = payload;\n        this.type = type;\n        this.payload = payload;\n        this.type = type;\n    }\n}\n/**\n * JsonRpcError Class\n *\n * @param  {String} message\n * @param  {Integer} code\n * @return {String} name: optional\n * @api public\n */\nexport class JsonRpcError {\n    constructor(message, code, data) {\n        this.message = message;\n        this.code = isInteger(code) ? code : 0;\n        if (data != null) {\n            this.data = data;\n        }\n    }\n}\nJsonRpcError.invalidRequest = function (data) {\n    return new JsonRpcError('Invalid request', -32600, data);\n};\nJsonRpcError.methodNotFound = function (data) {\n    return new JsonRpcError('Method not found', -32601, data);\n};\nJsonRpcError.invalidParams = function (data) {\n    return new JsonRpcError('Invalid params', -32602, data);\n};\nJsonRpcError.internalError = function (data) {\n    return new JsonRpcError('Internal error', -32603, data);\n};\nJsonRpcError.parseError = function (data) {\n    return new JsonRpcError('Parse error', -32700, data);\n};\n/**\n * Creates a JSON-RPC 2.0 request object\n *\n * @param  {String|Integer} id\n * @param  {String} method\n * @param  {Object|Array} [params]: optional\n * @return {Object} JsonRpc object\n * @api public\n */\nexport function request(id, method, params) {\n    const object = new RequestObject(id, method, params);\n    validateMessage(object, true);\n    return object;\n}\n/**\n * Creates a JSON-RPC 2.0 notification object\n *\n * @param  {String} method\n * @param  {Object|Array} [params]: optional\n * @return {Object} JsonRpc object\n * @api public\n */\nexport function notification(method, params) {\n    const object = new NotificationObject(method, params);\n    validateMessage(object, true);\n    return object;\n}\n/**\n * Creates a JSON-RPC 2.0 success response object\n *\n * @param  {String|Integer} id\n * @param  {Mixed} result\n * @return {Object} JsonRpc object\n * @api public\n */\nexport function success(id, result) {\n    const object = new SuccessObject(id, result);\n    validateMessage(object, true);\n    return object;\n}\n/**\n * Creates a JSON-RPC 2.0 error response object\n *\n * @param  {String|Integer} id\n * @param  {Object} JsonRpcError error\n * @return {Object} JsonRpc object\n * @api public\n */\nexport function error(id, err) {\n    const object = new ErrorObject(id, err);\n    validateMessage(object, true);\n    return object;\n}\nexport function parse(message) {\n    if (!isString(message)) {\n        return new JsonRpcParsed(JsonRpcError.invalidRequest(message), \"invalid\" /* invalid */);\n    }\n    let jsonrpcObj;\n    try {\n        jsonrpcObj = JSON.parse(message);\n    }\n    catch (err) {\n        return new JsonRpcParsed(JsonRpcError.parseError(message), \"invalid\" /* invalid */);\n    }\n    return parseJsonRpcObject(jsonrpcObj);\n}\n/**\n * Takes a JSON-RPC 2.0 payload (Object) or batch (Object[]) and tries to parse it.\n * If successful, determine what objects are inside (response, notification,\n * success, error, or invalid), and return their types and properly formatted objects.\n *\n * @param  {Object|Array} jsonrpcObj\n * @return {Object|Array} a single object or an array of `JsonRpcParsed` objects with `type` and `payload`:\n *\n *  {\n *    type: <Enum, 'request'|'notification'|'success'|'error'|'invalid'>\n *    payload: <JsonRpc|JsonRpcError>\n *  }\n *\n * @api public\n */\nexport function parseJsonRpcObject(jsonrpcObj) {\n    if (!Array.isArray(jsonrpcObj)) {\n        return parseObject(jsonrpcObj);\n    }\n    if (jsonrpcObj.length === 0) {\n        return new JsonRpcParsed(JsonRpcError.invalidRequest(jsonrpcObj), \"invalid\" /* invalid */);\n    }\n    const parsedObjectArray = [];\n    for (let i = 0, len = jsonrpcObj.length; i < len; i++) {\n        parsedObjectArray[i] = parseObject(jsonrpcObj[i]);\n    }\n    return parsedObjectArray;\n}\n/**\n * Alias for `parse` method.\n * Takes a JSON-RPC 2.0 payload (String) and tries to parse it into a JSON.\n * @api public\n */\nexport const parseJsonRpcString = parse;\n/**\n * Takes a JSON-RPC 2.0 payload (Object) and tries to parse it into a JSON.\n * If successful, determine what object is it (response, notification,\n * success, error, or invalid), and return it's type and properly formatted object.\n *\n * @param  {Object} obj\n * @return {Object} an `JsonRpcParsed` object with `type` and `payload`:\n *\n *  {\n *    type: <Enum, 'request'|'notification'|'success'|'error'|'invalid'>\n *    payload: <JsonRpc|JsonRpcError>\n *  }\n *\n * @api public\n */\nexport function parseObject(obj) {\n    let err = null;\n    let payload = null;\n    let payloadType = \"invalid\" /* invalid */;\n    if (obj == null || obj.jsonrpc !== JsonRpc.VERSION) {\n        err = JsonRpcError.invalidRequest(obj);\n        payloadType = \"invalid\" /* invalid */;\n    }\n    else if (!hasOwnProperty.call(obj, 'id')) {\n        const tmp = obj;\n        payload = new NotificationObject(tmp.method, tmp.params);\n        err = validateMessage(payload);\n        payloadType = \"notification\" /* notification */;\n    }\n    else if (hasOwnProperty.call(obj, 'method')) {\n        const tmp = obj;\n        payload = new RequestObject(tmp.id, tmp.method, tmp.params);\n        err = validateMessage(payload);\n        payloadType = \"request\" /* request */;\n    }\n    else if (hasOwnProperty.call(obj, 'result')) {\n        const tmp = obj;\n        payload = new SuccessObject(tmp.id, tmp.result);\n        err = validateMessage(payload);\n        payloadType = \"success\" /* success */;\n    }\n    else if (hasOwnProperty.call(obj, 'error')) {\n        const tmp = obj;\n        payloadType = \"error\" /* error */;\n        if (tmp.error == null) {\n            err = JsonRpcError.internalError(tmp);\n        }\n        else {\n            const errorObj = new JsonRpcError(tmp.error.message, tmp.error.code, tmp.error.data);\n            if (errorObj.message !== tmp.error.message || errorObj.code !== tmp.error.code) {\n                err = JsonRpcError.internalError(tmp);\n            }\n            else {\n                payload = new ErrorObject(tmp.id, errorObj);\n                err = validateMessage(payload);\n            }\n        }\n    }\n    if (err == null && payload != null) {\n        return new JsonRpcParsed(payload, payloadType);\n    }\n    return new JsonRpcParsed(err != null ? err : JsonRpcError.invalidRequest(obj), \"invalid\" /* invalid */);\n}\n// if error, return error, else return null\nfunction validateMessage(obj, throwIt) {\n    let err = null;\n    if (obj instanceof RequestObject) {\n        err = checkId(obj.id);\n        if (err == null) {\n            err = checkMethod(obj.method);\n        }\n        if (err == null) {\n            err = checkParams(obj.params);\n        }\n    }\n    else if (obj instanceof NotificationObject) {\n        err = checkMethod(obj.method);\n        if (err == null) {\n            err = checkParams(obj.params);\n        }\n    }\n    else if (obj instanceof SuccessObject) {\n        err = checkId(obj.id);\n        if (err == null) {\n            err = checkResult(obj.result);\n        }\n    }\n    else if (obj instanceof ErrorObject) {\n        err = checkId(obj.id, true);\n        if (err == null) {\n            err = checkError(obj.error);\n        }\n    }\n    if (throwIt && err != null) {\n        throw err;\n    }\n    return err;\n}\nfunction checkId(id, maybeNull) {\n    if (maybeNull && id === null) {\n        return null;\n    }\n    return isString(id) || isInteger(id)\n        ? null\n        : JsonRpcError.internalError('\"id\" must be provided, a string or an integer.');\n}\nfunction checkMethod(method) {\n    return isString(method) ? null : JsonRpcError.invalidRequest(method);\n}\nfunction checkResult(result) {\n    return result === undefined\n        ? JsonRpcError.internalError('Result must exist for success Response objects')\n        : null;\n}\nfunction checkParams(params) {\n    if (params === undefined) {\n        return null;\n    }\n    if (Array.isArray(params) || isObject(params)) {\n        // ensure params can be stringify\n        try {\n            JSON.stringify(params);\n            return null;\n        }\n        catch (err) {\n            return JsonRpcError.parseError(params);\n        }\n    }\n    return JsonRpcError.invalidParams(params);\n}\nfunction checkError(err) {\n    if (!(err instanceof JsonRpcError)) {\n        return JsonRpcError.internalError('Error must be an instance of JsonRpcError');\n    }\n    if (!isInteger(err.code)) {\n        return JsonRpcError.internalError('Invalid error code. It must be an integer.');\n    }\n    if (!isString(err.message)) {\n        return JsonRpcError.internalError('Message must exist or must be a string.');\n    }\n    return null;\n}\nfunction isString(obj) {\n    return obj !== '' && typeof obj === 'string';\n}\nfunction isObject(obj) {\n    return obj != null && typeof obj === 'object' && !Array.isArray(obj);\n}\nconst jsonrpc = {\n    JsonRpc,\n    JsonRpcError,\n    request,\n    notification,\n    success,\n    error,\n    parse,\n    parseObject,\n    parseJsonRpcObject,\n    parseJsonRpcString,\n};\nexport default jsonrpc;\nexport { jsonrpc };\n//# sourceMappingURL=jsonrpc.js.map","class Indexer {\n    constructor() {\n        this.id = 0;\n    }\n    get() {\n        this.id += 1;\n        return this.id;\n    }\n    reset() {\n        this.id = 0;\n    }\n}\nexport const indexer = new Indexer();\n","import UAParser from 'ua-parser-js';\nexport default new UAParser();\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as jsonrpc from 'jsonrpc-lite';\nimport { indexer } from './indexer';\nimport userAgentParser from './user-agent';\nimport { SDK_VERSION } from '../config';\nconst LogLevel = {\n    verbose: 0,\n    trace: 1,\n    debug: 2,\n    information: 3,\n    warning: 4,\n    error: 5\n};\nexport class LogSender {\n    constructor() {\n        this.ws = null;\n        this.keepAliveInterval = -1;\n        this.host = '';\n        this.token = '';\n        this.logLevelNumber = 3;\n    }\n    createWebSocket(host, token) {\n        this.host = host;\n        this.token = token;\n        return new Promise((resolve) => {\n            this.ws = new WebSocket(host);\n            this.ws.onopen = () => {\n                const os = userAgentParser.getOS();\n                const browser = userAgentParser.getBrowser();\n                const method = 'CnL.Registration';\n                const params = {\n                    token: token,\n                    userInfo: {\n                        sdkVersion: SDK_VERSION,\n                        platform: 'web',\n                        platformVersion: `${browser.name}/${browser.version}`,\n                        osName: os.name,\n                        osVersion: os.version,\n                        deviceModel: '',\n                    }\n                };\n                this.request({ method, params });\n                this.clearTimer();\n                this.keepAliveInterval = window.setInterval(() => {\n                    this.request({\n                        method: 'CnL.KeepAlive'\n                    });\n                }, 50000);\n                resolve(true);\n            };\n            this.ws.onerror = () => {\n                this.clearTimer();\n            };\n            this.ws.onclose = () => {\n                this.clearTimer();\n            };\n            this.ws.onmessage = (evt) => {\n                const data = JSON.parse(evt.data);\n                if (data.method === 'CnL.Push') {\n                    this.setLevel(data.params.config.log_level);\n                }\n            };\n        });\n    }\n    request(body, isLog = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.ws) {\n                return;\n            }\n            const method = body.method;\n            const params = body.params;\n            if (method === 'CnL.Log') {\n                const level = params.logs[0].level;\n                if (LogLevel[level] < this.logLevelNumber) {\n                    return;\n                }\n            }\n            const id = indexer.get().toString();\n            let stringified = '';\n            if (!isLog) {\n                stringified = JSON.stringify(jsonrpc.request(id, method, params));\n            }\n            else {\n                stringified = JSON.stringify(jsonrpc.notification(method, params));\n            }\n            if (this.ws.readyState !== this.ws.CONNECTING) {\n                if (this.ws.readyState !== this.ws.CLOSED && this.ws.readyState !== this.ws.CLOSING) {\n                    this.ws.send(stringified);\n                }\n                else {\n                    this.ws.close();\n                    yield this.createWebSocket(this.host, this.token);\n                    this.ws.send(stringified);\n                }\n            }\n            else {\n                const timer = window.setInterval(() => {\n                    var _a, _b, _c;\n                    if (((_a = this.ws) === null || _a === void 0 ? void 0 : _a.readyState) === ((_b = this.ws) === null || _b === void 0 ? void 0 : _b.OPEN)) {\n                        window.clearInterval(timer);\n                        (_c = this.ws) === null || _c === void 0 ? void 0 : _c.send(stringified);\n                    }\n                }, 10);\n            }\n        });\n    }\n    clearTimer() {\n        window.clearInterval(this.keepAliveInterval);\n        this.keepAliveInterval = -1;\n    }\n    close() {\n        var _a;\n        (_a = this.ws) === null || _a === void 0 ? void 0 : _a.close();\n        this.ws = null;\n        this.logLevelNumber = 0;\n    }\n    setLevel(logLevel) {\n        this.logLevelNumber = LogLevel[logLevel];\n    }\n}\n","import { LogSender } from './log-send';\nimport { SDK_VERSION } from '../config';\n/*\ntrace : 서버 req/res\ndebug : client 생성 정보, offer/answer,\ninfo : 메서드 call 정보\n//warn : 카메라 권한 에러, 음... 그 외 서비스가 멈추지 않아도 되는 에러는??\nerror : 서버 에러, 그 외 모든 에러\n*/\nexport const loggerSender = new LogSender();\nconst LogLevel = {\n    trace: 0,\n    debug: 1,\n    info: 2,\n    error: 3,\n    off: 4,\n};\nconst toNowDateString = () => {\n    const now = new Date();\n    const year = now.getFullYear();\n    const month = now.getMonth() + 1;\n    const date = now.getDate();\n    const hour = now.getHours();\n    const min = now.getMinutes();\n    const sec = now.getSeconds();\n    const millisecond = now.getMilliseconds();\n    return `${year}.${month >= 10 ? month : '0' + month}.${date >= 10 ? date : '0' + date} `\n        + `${hour >= 10 ? hour : '0' + hour}:${min >= 10 ? min : '0' + min}:${sec >= 10 ? sec : '0' + sec}.${millisecond}`;\n};\nconst toISOString = () => {\n    const now = new Date();\n    return now.toISOString();\n};\nconst toMsgString = (msg, level) => {\n    const log = msg.map((log) => {\n        if (typeof log === 'object') {\n            log = JSON.stringify(log);\n        }\n        return log;\n    }).join(' ');\n    const method = 'CnL.Log';\n    const params = {\n        sdkVersion: 'web_' + SDK_VERSION,\n        logs: [{\n                date: toISOString(),\n                level: level,\n                message: log\n            }]\n    };\n    loggerSender.request({ method, params }, true);\n    return log;\n};\n;\nexport const logger = {\n    logLevelNumber: 0,\n    setLevel(logLevel) {\n        this.logLevelNumber = LogLevel[logLevel];\n    },\n    trace(...msg) {\n        if (this.logLevelNumber <= LogLevel.trace) {\n            console.log(`[TRACE] [${toNowDateString()}]`, toMsgString(msg, 'trace'));\n        }\n        else {\n            toMsgString(msg, 'trace');\n        }\n    },\n    debug(...msg) {\n        if (this.logLevelNumber <= LogLevel.debug) {\n            console.log(`[DEBUG] [${toNowDateString()}]`, toMsgString(msg, 'debug'));\n        }\n        else {\n            toMsgString(msg, 'debug');\n        }\n    },\n    info(...msg) {\n        if (this.logLevelNumber <= LogLevel.info) {\n            console.log(`[INFO] [${toNowDateString()}]`, toMsgString(msg, 'information'));\n        }\n        else {\n            toMsgString(msg, 'information');\n        }\n    },\n    error(...msg) {\n        if (this.logLevelNumber <= LogLevel.error) {\n            console.error(`[ERROR] [${toNowDateString()}]`, toMsgString(msg, 'error'));\n        }\n        else {\n            toMsgString(msg, 'error');\n        }\n    }\n};\nexport const Loggable = (level) => {\n    return (target, propertyKey, descriptor) => {\n        const originalMethod = descriptor.value;\n        descriptor.value = function (...args) {\n            let log = '';\n            try {\n                log = '[method][' + target.constructor.name + '.' + propertyKey + ']' + ' arguments = ' + JSON.stringify(args);\n            }\n            catch (err) {\n                const message = err.message;\n                log = '[method][' + target.constructor.name + '.' + propertyKey + ']' + ' arguments = ' + message;\n            }\n            logger[level](log);\n            return originalMethod.apply(this, args);\n        };\n        return descriptor;\n    };\n};\n","class ErrorExecption extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ErrorExecption.prototype);\n    }\n    getCode() {\n        return this.code;\n    }\n    getMessage() {\n        return this.message;\n    }\n}\nclass ServerError extends ErrorExecption {\n    constructor(code, message) {\n        super(code, message);\n        this.name = 'ServerError';\n    }\n}\nexport { ServerError };\nclass ClientError extends ErrorExecption {\n    constructor(code, message) {\n        super(code, message);\n        this.name = 'ClientError';\n    }\n}\nexport { ClientError };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as jsonrpc from 'jsonrpc-lite';\nimport { indexer } from './indexer';\nimport { logger } from './logger';\nimport { ServerError } from './error-exception';\nexport class HttpWithJSONRpc {\n    constructor() {\n        this.headers = {};\n        this.host = '';\n    }\n    setHost(host) {\n        this.host = host;\n    }\n    setHeaders(headers) {\n        this.headers = headers;\n    }\n    request(body, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { method, params } = body;\n            const { httpMethod = 'post', path = '' } = options;\n            const id = indexer.get().toString();\n            const stringified = JSON.stringify(jsonrpc.request(id, method, params));\n            const url = this.host + path;\n            logger.trace(`[${method}] ${stringified}`);\n            const res = yield fetch(url, Object.assign(Object.assign({}, this.headers), { method: httpMethod, body: stringified }));\n            const data = (yield res.json());\n            //const data = await res.json();\n            if (method !== 'Provision' && method !== 'ExtendTTL') {\n                if ('error' in data) {\n                    logger.error(data);\n                    const error = new ServerError(data.error.code, data.error.message);\n                    throw error;\n                }\n            }\n            logger.trace(`[RESULT] ${JSON.stringify(data)}`);\n            return data;\n        });\n    }\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { PROVISIONING_SERVER_URL } from '../../config';\nimport { hash } from '../../utils/hash';\nimport { HttpWithJSONRpc } from '../../utils/http-with-json-rpc';\nimport { Loggable, logger } from '../../utils/logger';\nimport { ServerError } from '../../utils/error-exception';\nexport class AuthApiClient extends HttpWithJSONRpc {\n    constructor() {\n        super();\n        this.setHeaders({ method: 'post', headers: { 'Content-Type': 'application/json' } });\n    }\n    authorize(authConfig) {\n        const host = authConfig.host || PROVISIONING_SERVER_URL;\n        this.setHost(host + '/api/v1/rpc');\n        if (!('token' in authConfig))\n            return this.internally(authConfig);\n        else if (('token' in authConfig))\n            return this.externally(authConfig);\n        throw new Error('Provisioning type mismatch');\n    }\n    ;\n    refreshToken(oldToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'ExtendTTL';\n            const params = { token: oldToken };\n            const response = yield this.request({ method, params });\n            if ('error' in response) {\n                logger.error(response);\n                const error = new ServerError(response.error.code, response.error.message);\n                throw error;\n            }\n            const { result } = response;\n            return result;\n        });\n    }\n    ;\n    internally(config) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { serviceId, serviceKey, secret } = config;\n            const scheme = 'internal';\n            const method = 'Provision';\n            const firstParams = { scheme, serviceId };\n            const firstResponse = yield this.request({\n                method,\n                params: firstParams,\n            });\n            if ('result' in firstResponse) {\n                logger.error(firstResponse);\n                throw new Error('Provisioning Failed');\n            }\n            if (!('data' in firstResponse.error)) {\n                logger.error(firstResponse);\n                const error = new ServerError(firstResponse.error.code, firstResponse.error.message);\n                throw error;\n            }\n            const { nonce } = firstResponse.error.data;\n            const ha = yield hash([serviceId, serviceKey, secret].join(':'));\n            const value = yield hash([ha, nonce].join(':'));\n            const secondParams = {\n                serviceId,\n                scheme,\n                auth: {\n                    nonce,\n                    key: serviceKey,\n                    value,\n                },\n            };\n            const secondResponse = yield this.request({ method, params: secondParams });\n            if ('error' in secondResponse) {\n                logger.error(secondResponse);\n                const error = new ServerError(secondResponse.error.code, secondResponse.error.message);\n                throw error;\n            }\n            const { result } = secondResponse;\n            return result;\n        });\n    }\n    ;\n    externally(config) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { token, serviceId } = config;\n            const scheme = 'external';\n            const method = 'Provision';\n            const params = { serviceId, scheme, auth: { value: token } };\n            const response = yield this.request({ method, params });\n            if ('error' in response) {\n                logger.error(response);\n                const error = new ServerError(response.error.code, response.error.message);\n                throw error;\n            }\n            const { result } = response;\n            return result;\n        });\n    }\n    ;\n}\n__decorate([\n    Loggable('info')\n], AuthApiClient.prototype, \"authorize\", null);\n__decorate([\n    Loggable('info')\n], AuthApiClient.prototype, \"refreshToken\", null);\n__decorate([\n    Loggable('info')\n], AuthApiClient.prototype, \"internally\", null);\n__decorate([\n    Loggable('info')\n], AuthApiClient.prototype, \"externally\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { HttpWithJSONRpc } from '../../utils/http-with-json-rpc';\nimport userAgentParser from '../../utils/user-agent';\nimport { SDK_VERSION } from '../../config';\nimport { Loggable } from '../../utils/logger';\nexport class RoomApiClient extends HttpWithJSONRpc {\n    constructor(audioOption) {\n        super();\n        this.audioOption = 1;\n        this.audioOption = audioOption;\n    }\n    setRoomId(roomId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.roomId = roomId;\n        });\n    }\n    ;\n    setParticipantId(participantId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.participantId = participantId;\n        });\n    }\n    ;\n    sendEnterRoom() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const os = userAgentParser.getOS();\n            const browser = userAgentParser.getBrowser();\n            const method = 'Conference.EnterRoom';\n            const params = {\n                roomId: this.roomId,\n                userInfo: {\n                    sdkVersion: SDK_VERSION,\n                    platform: 'web',\n                    platformVersion: `${browser.name}/${browser.version}`,\n                    osName: os.name,\n                    osVersion: os.version,\n                    deviceModel: '',\n                }\n            };\n            const response = yield this.request({ method, params });\n            if ('error' in response) {\n                throw new Error(JSON.stringify(response.error));\n            }\n            this.sign = response.result.sign;\n            return response;\n        });\n    }\n    ;\n    sendCreateSession(direction, index, sdp) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.CreateSession';\n            const params = {\n                roomId: this.roomId,\n                participantId: this.participantId,\n                sign: this.sign,\n                direction,\n                index,\n                desc: sdp,\n                audioOption: this.audioOption\n            };\n            const response = yield this.request({ method, params });\n            if ('error' in response) {\n                throw new Error(JSON.stringify(response.error));\n            }\n            return response;\n        });\n    }\n    ;\n    sendAddCandidate(direction, index, candidate) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.AddCandidate';\n            const params = {\n                roomId: this.roomId,\n                participantId: this.participantId,\n                sign: this.sign,\n                direction,\n                index,\n                candidate,\n            };\n            const response = yield this.request({ method, params });\n            if ('error' in response) {\n                throw new Error(JSON.stringify(response.error));\n            }\n            return response;\n        });\n    }\n    ;\n    //Conference.RestartIce도 sign이 들어가는지 확인 필요\n    sendRestartIce(direction, index, sdp) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.RestartIce';\n            const params = {\n                roomId: this.roomId,\n                participantId: this.participantId,\n                sign: this.sign,\n                direction,\n                index,\n                desc: sdp\n            };\n            const response = yield this.request({ method, params });\n            if ('error' in response) {\n                throw new Error(JSON.stringify(response.error));\n            }\n            return response;\n        });\n    }\n    ;\n    sendDestroySession(direction, index) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.DestroySession';\n            const params = {\n                roomId: this.roomId,\n                participantId: this.participantId,\n                sign: this.sign,\n                direction,\n                index,\n            };\n            const response = yield this.request({ method, params });\n            if ('error' in response) {\n                throw new Error(JSON.stringify(response.error));\n            }\n            return response;\n        });\n    }\n    ;\n}\n__decorate([\n    Loggable('info')\n], RoomApiClient.prototype, \"setRoomId\", null);\n__decorate([\n    Loggable('info')\n], RoomApiClient.prototype, \"setParticipantId\", null);\n__decorate([\n    Loggable('info')\n], RoomApiClient.prototype, \"sendEnterRoom\", null);\n__decorate([\n    Loggable('debug')\n], RoomApiClient.prototype, \"sendCreateSession\", null);\n__decorate([\n    Loggable('debug')\n], RoomApiClient.prototype, \"sendAddCandidate\", null);\n__decorate([\n    Loggable('debug')\n], RoomApiClient.prototype, \"sendRestartIce\", null);\n__decorate([\n    Loggable('info')\n], RoomApiClient.prototype, \"sendDestroySession\", null);\n","import EventEmitter from 'eventemitter3';\nimport * as jsonrpc from 'jsonrpc-lite';\nimport { indexer } from './indexer';\nexport class JSONRpc {\n    constructor() {\n        this.emitter = new EventEmitter();\n        this.methodMap = new Map();\n        this.toStream = () => console.warn('Please set toStream function!');\n    }\n    /**\n     * handle stringified message.\n     * parse -> emit\n     */\n    handleMessage(stringified) {\n        const parsedObjects = jsonrpc.parse(stringified);\n        const isArray = Array.isArray(parsedObjects);\n        const handleParsedObject = (parsedObject) => {\n            const { payload } = parsedObject;\n            const hasId = 'id' in payload;\n            const hasMethod = 'method' in payload;\n            if (hasId && !hasMethod) {\n                // = success or error\n                const id = String(payload.id);\n                const method = this.methodMap.get(id);\n                this.emitter.emit(id, payload);\n                // FIXME: 아래 꼭 필요한건지 확인할 필요 있음\n                if (method)\n                    this.emitter.emit(method, payload);\n                return;\n            }\n            if (hasMethod && !hasId) {\n                // = notification\n                const method = payload.method;\n                return this.emitter.emit(method, payload);\n            }\n            console.error('invalid message', parsedObject);\n        };\n        if (!isArray) {\n            handleParsedObject(parsedObjects);\n        }\n        else {\n            parsedObjects.forEach(handleParsedObject);\n        }\n    }\n    /**\n     * Send json rpc message by using `toStream` function,\n     * and receive result\n     */\n    call(method, params) {\n        return new Promise(resolve => {\n            const id = indexer.get().toString();\n            this.methodMap.set(id, method);\n            this.emitter.once(id, resolve);\n            const requestObject = jsonrpc.request(id, method, params);\n            this.toStream(requestObject);\n        });\n    }\n    on(method, callback) {\n        this.emitter.on(method, callback);\n    }\n    off(method, callback) {\n        this.emitter.off(method, callback);\n    }\n}\n","export const noop = () => null;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from 'eventemitter3';\nimport { JSONRpc } from '../../utils/json-rpc';\nimport { Loggable, logger } from '../../utils/logger';\nimport { noop } from '../../utils/noop';\nimport userAgentParser from '../../utils/user-agent';\nimport { ClientError } from '../../utils/error-exception';\nconst browser = userAgentParser.getBrowser();\nexport class Session {\n    constructor(apiClient, direction, config) {\n        this.restartIceInterval = -1;\n        this.config = {\n            cpuOveruseDetection: true,\n            maxFramerate: {\n                l: 10,\n                m: 20,\n                h: 30\n            }\n        };\n        this.emitter = new EventEmitter();\n        this.jsonrpc = new JSONRpc();\n        this.roomApiClient = apiClient;\n        this.direction = direction;\n        this.index = 0;\n        Object.assign(this.config, config);\n        this.jsonrpc.toStream = message => {\n            if (this.dataChannel && this.dataChannel.readyState === 'open') {\n                logger.trace(`[${this.direction}] [SEND]`, message);\n                this.dataChannel.send(JSON.stringify(message));\n            }\n        };\n    }\n    create(rtcConfig) {\n        return new Promise((resolve, reject) => {\n            // TODO: 이벤트 네이밍 규칙적으로 설정하기\n            this.emitter.once('SessionCreated', () => {\n                resolve();\n            });\n            try {\n                this.createPeerConnection(rtcConfig);\n                this.createDataChannel();\n            }\n            catch (err) {\n                const message = err.message;\n                reject(new ClientError(0, message));\n            }\n        });\n    }\n    destroy() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.peerConnection.close();\n            this.dataChannel.close();\n            yield this.roomApiClient.sendDestroySession(this.direction, this.index);\n        });\n    }\n    on(name, callback) {\n        this.emitter.on(name, callback);\n    }\n    off(name, callback) {\n        this.emitter.off(name, callback);\n    }\n    createPeerConnection(rtcConfig) {\n        if (this.peerConnection)\n            this.peerConnection.close();\n        const _rtcConfig = Object.assign(Object.assign({}, rtcConfig), { bundlePolicy: 'max-bundle', iceTransportPolicy: 'all', rtcpMuxPolicy: 'require', iceCandidatePoolSize: 0, sdpSemantics: 'unified-plan', extmapAllowMixed: true });\n        const opt = {\n            optional: [\n                //{ googHighStartBitrate: 0 }, //실제로 의미가 있는가?\n                //{ googPayloadPadding: true }, //추천하지 않음\n                //{ googScreencastMinBitrate: 100 }, //의미없음\n                { enableDscp: true }\n            ]\n        };\n        if (this.config.cpuOveruseDetection) {\n            opt.optional.push({ googCpuOveruseDetection: true });\n            opt.optional.push({ googCpuOveruseEncodeUsage: true });\n            opt.optional.push({ googCpuUnderuseThreshold: 55 });\n            opt.optional.push({ googCpuOveruseThreshold: 85 });\n        }\n        else {\n            opt.optional.push({ googCpuOveruseDetection: false });\n        }\n        /* @ts-ignore */\n        this.peerConnection = new RTCPeerConnection(_rtcConfig, opt);\n        logger.debug(`[${this.direction}] peerConnection = ${JSON.stringify(_rtcConfig)}`);\n        this.peerConnection.onicecandidate = ice => {\n            if (ice.candidate) {\n                //if(ice.candidate.candidate) {\n                this.roomApiClient.sendAddCandidate(this.direction, this.index, ice.candidate);\n                logger.debug(`[${this.direction}] candidate = ${JSON.stringify(ice.candidate)}`);\n                //}\n            }\n        };\n        this.peerConnection.onnegotiationneeded = () => __awaiter(this, void 0, void 0, function* () {\n            logger.debug(`[${this.direction}] onnegotiationneeded`);\n            try {\n                const offer = yield this.peerConnection.createOffer();\n                yield this.peerConnection.setLocalDescription(offer);\n                logger.debug(`[${this.direction}] create offer = ${JSON.stringify(offer)}`);\n                const res = yield this.roomApiClient.sendCreateSession(this.direction, this.index, offer);\n                const answer = new RTCSessionDescription(res.result.desc);\n                yield this.peerConnection.setRemoteDescription(answer);\n                logger.debug(`[${this.direction}] receive answer = ${JSON.stringify(answer)}`);\n            }\n            catch (err) {\n                const message = err.message;\n                logger.error(`[${this.direction}] onnegotiationneeded = ${message}`);\n            }\n        });\n        this.peerConnection.onconnectionstatechange = (event) => __awaiter(this, void 0, void 0, function* () {\n            logger.debug(`[${this.direction}] onconnectionstatechange = ${event.target.connectionState}`);\n            this._restartIceTimerStop();\n            if (event.target.connectionState === 'disconnected') {\n                this._restartIceTimerStart();\n            }\n            else if (event.target.connectionState === 'failed') {\n                logger.error(`[${this.direction}] onconnectionstatechange = ${event.target.connectionState}`);\n                //연결 실패.\n                this.emitter.emit('error', 'connection failed');\n            }\n        });\n        this.peerConnection.oniceconnectionstatechange = (event) => {\n            logger.debug(`[${this.direction}] oniceconnectionstatechange = ${event.target.iceConnectionState}`);\n            if (browser.name === 'Firefox') {\n                this._restartIceTimerStop();\n                if (event.target.iceConnectionState === 'disconnected') {\n                    this._restartIceTimerStart();\n                }\n                else if (event.target.iceConnectionState === 'failed') {\n                    logger.error(`[${this.direction}] onconnectionstatechange = ${event.target.iceConnectionState}`);\n                    //연결 실패.\n                    this.emitter.emit('error', 'connection failed');\n                }\n            }\n            ;\n        };\n        this.peerConnection.ontrack = noop;\n    }\n    createDataChannel() {\n        if (this.dataChannel)\n            this.dataChannel.close();\n        this.dataChannel = this.peerConnection.createDataChannel(this.direction);\n        this.dataChannel.onopen = () => {\n            logger.debug(`[${this.direction}] dataChannel is opened`);\n        };\n        this.dataChannel.onclose = () => {\n            logger.debug(`[${this.direction}] dataChannel is closed`);\n        };\n        this.dataChannel.onerror = (evt) => {\n            let error = evt.error;\n            logger.error(`[${this.direction}] dataChannel occurred error. reason=${JSON.stringify(error)}`);\n        };\n        this.dataChannel.onmessage = (event) => __awaiter(this, void 0, void 0, function* () {\n            const message = yield new Response(event.data).text();\n            logger.trace(`[${this.direction}] [RECEIVE] dataChannel.onmessage = ${message}`);\n            this.jsonrpc.handleMessage(message);\n        });\n    }\n    _restartIceTimerStart() {\n        this.restartIceInterval = window.setInterval(() => {\n            if (navigator.onLine) {\n                this._restartIceTimerStop();\n                this._restartIce();\n            }\n        }, 100);\n    }\n    _restartIceTimerStop() {\n        window.clearInterval(this.restartIceInterval);\n        this.restartIceInterval = -1;\n    }\n    _restartIce() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const offer = yield this.peerConnection.createOffer({ iceRestart: true });\n                yield this.peerConnection.setLocalDescription(offer);\n                logger.debug(`[${this.direction}](RestartICE) create offer = ${JSON.stringify(offer)}`);\n                const res = yield this.roomApiClient.sendRestartIce(this.direction, this.index, offer);\n                const answer = new RTCSessionDescription(res.result.desc);\n                yield this.peerConnection.setRemoteDescription(answer);\n                logger.debug(`[${this.direction}](RestartICE) receive answer = ${JSON.stringify(answer)}`);\n            }\n            catch (err) {\n                const message = err.message;\n                logger.error(`[${this.direction}](RestartICE) onconnectionstatechange = ${message}`);\n            }\n        });\n    }\n}\n__decorate([\n    Loggable('info')\n], Session.prototype, \"create\", null);\n__decorate([\n    Loggable('info')\n], Session.prototype, \"destroy\", null);\n__decorate([\n    Loggable('info')\n], Session.prototype, \"createPeerConnection\", null);\n__decorate([\n    Loggable('info')\n], Session.prototype, \"createDataChannel\", null);\n__decorate([\n    Loggable('info')\n], Session.prototype, \"_restartIce\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Session } from './session';\nimport { indexer } from '../../utils/indexer';\nimport { Loggable, logger } from '../../utils/logger';\nimport { ClientError, ServerError } from '../../utils/error-exception';\n// NOTE: receiverId = transceiver.mid\nexport class DownSession extends Session {\n    constructor(roomApiClient, config) {\n        super(roomApiClient, 'down', config);\n        this.receiverTrackMap = {};\n        this.fixedAudioReceiver = []; //shared or exclusive\n        this.addListeners();\n    }\n    addListeners() {\n        this.jsonrpc.on('Conference.OnParticipantsInfo', notification => {\n            const { params } = notification;\n            this.emitter.emit('ChangedParticipantsInfo', params);\n        });\n        this.jsonrpc.on('Conference.OnOffer', notification => {\n            const { params } = notification;\n            // @NOTE: negotiationId가 (system)인 경우는, addStream 호출과 상관없이 세션 생성하자마자 내려오는 이벤트이다\n            this.emitter.emit(params.negotiationId, params);\n        });\n        this.jsonrpc.on('Conference.OnError', notification => {\n            const { params } = notification;\n            if (params.negotiationId) {\n                this.emitter.emit(params.negotiationId, params);\n            }\n        });\n        this.jsonrpc.on('Conference.OnMessage', notification => {\n            const { params } = notification;\n            this.emitter.emit(params.type, params.data);\n        });\n        this.jsonrpc.on('Conference.OnStreamChanged', notification => {\n            this.emitter.emit('StreamChanged', notification);\n        });\n        // 처음 room과 연결되면 OnOffer가 내려온다.\n        // FIXME: event name 및 로직 위치 이동(addReceiver와 같은 부분이기 때문)\n        this.emitter.on('(system)', (params) => __awaiter(this, void 0, void 0, function* () {\n            const { negotiationId, receivers, desc: offer } = params;\n            yield this.peerConnection.setRemoteDescription(offer);\n            const answer = yield this.peerConnection.createAnswer();\n            yield this.peerConnection.setLocalDescription(answer);\n            yield this.callSetAnswer({ negotiationId, desc: answer });\n            const transceivers = this.peerConnection.getTransceivers();\n            this.receiverTrackMap = transceivers.reduce((receiverTrackMap, transceiver) => {\n                const receiverId = transceiver.mid;\n                if (receiverId) {\n                    if (transceiver.receiver.track.kind === 'video') {\n                        receiverTrackMap[receiverId] = transceiver.receiver.track;\n                    }\n                }\n                return receiverTrackMap;\n            }, {});\n            this.fixedAudioReceiver = transceivers\n                .filter(receiverTrackMap => receiverTrackMap.receiver.track.kind === 'audio')\n                .map(transceiver => transceiver.receiver);\n            const payload = {\n                name: 'init',\n                receivers,\n            };\n            this.emitter.emit('UpdatedReceivers', payload);\n        }));\n    }\n    getTrack(receiverId) {\n        return this.receiverTrackMap[receiverId];\n    }\n    addReceiver(receivers) {\n        return new Promise((resolve, reject) => {\n            const negotiationId = indexer.get().toString();\n            this.emitter.once(negotiationId, (params) => __awaiter(this, void 0, void 0, function* () {\n                if ('code' in params) {\n                    logger.error(params);\n                    const error = new ServerError(params.code, params.message);\n                    return reject(error);\n                }\n                try {\n                    const { receivers, desc: offer } = params;\n                    yield this.peerConnection.setRemoteDescription(offer);\n                    const answer = yield this.peerConnection.createAnswer();\n                    yield this.peerConnection.setLocalDescription(answer);\n                    yield this.callSetAnswer({ negotiationId, desc: answer });\n                    // update receivers\n                    const transceivers = this.peerConnection.getTransceivers();\n                    transceivers.reduce((receiverTrackMap, transceiver) => {\n                        const receiverId = transceiver.mid;\n                        const addReceiver = receivers.find(receiver => receiver.receiverId === receiverId);\n                        if (addReceiver) {\n                            if (transceiver.receiver.track.kind === 'video') {\n                                this.receiverTrackMap[addReceiver.receiverId] = transceiver.receiver.track;\n                            }\n                        }\n                        return receiverTrackMap;\n                    }, {});\n                    const payload = {\n                        name: 'add',\n                        receivers,\n                    };\n                    this.emitter.emit('UpdatedReceivers', payload);\n                    resolve();\n                }\n                catch (err) {\n                    const message = err.message;\n                    reject(new ClientError(0, message));\n                }\n            }));\n            try {\n                this.callAddReceiver({ negotiationId, receivers });\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n    }\n    getFixedAudioReceiver() {\n        return this.fixedAudioReceiver;\n    }\n    // TODO: 뭔가 어려워보이니 일단 두고보기\n    // configureReceiver(){}\n    // 실제로 사용되지 않는다.\n    removeReceiver(receiverIds) {\n        return new Promise((resolve, reject) => {\n            const negotiationId = indexer.get().toString();\n            const receivers = receiverIds.map(receiverId => ({ receiverId }));\n            this.emitter.once(negotiationId, (params) => __awaiter(this, void 0, void 0, function* () {\n                if ('code' in params) {\n                    logger.error(params);\n                    const error = new ServerError(params.code, params.message);\n                    return reject(error);\n                }\n                try {\n                    const { receivers, desc: offer } = params;\n                    yield this.peerConnection.setRemoteDescription(offer);\n                    const answer = yield this.peerConnection.createAnswer();\n                    yield this.peerConnection.setLocalDescription(answer);\n                    yield this.callSetAnswer({ negotiationId, desc: answer });\n                    const transceivers = this.peerConnection.getTransceivers();\n                    this.receiverTrackMap = transceivers.reduce((receiverTrackMap, transceiver) => {\n                        const receiverId = transceiver.mid;\n                        if (receiverId) {\n                            if (transceiver.receiver.track.kind === 'video') {\n                                receiverTrackMap[receiverId] = transceiver.receiver.track;\n                            }\n                        }\n                        return receiverTrackMap;\n                    }, {});\n                    const payload = {\n                        name: 'remove',\n                        receivers,\n                    };\n                    this.emitter.emit('UpdatedReceivers', payload);\n                    resolve();\n                }\n                catch (err) {\n                    const message = err.message;\n                    reject(new ClientError(0, message));\n                }\n            }));\n            try {\n                this.callRemoveReceiver({ negotiationId, receivers });\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n    }\n    assignStream(receivers) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.callAssignStream({ receivers });\n        });\n    }\n    configureReceiver(receivers) {\n        return this._callConfigureReceiver({ receivers });\n    }\n    callAddReceiver(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.AddReceiver';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n    callRemoveReceiver(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.RemoveReceiver';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n    callSetAnswer(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.SetAnswer';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n    callAssignStream(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.AssignStream';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n    _callConfigureReceiver(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.ConfigureReceiver';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n}\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"addListeners\", null);\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"getTrack\", null);\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"addReceiver\", null);\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"removeReceiver\", null);\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"assignStream\", null);\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"configureReceiver\", null);\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"callAddReceiver\", null);\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"callRemoveReceiver\", null);\n__decorate([\n    Loggable('debug')\n], DownSession.prototype, \"callSetAnswer\", null);\n__decorate([\n    Loggable('info')\n], DownSession.prototype, \"callAssignStream\", null);\n__decorate([\n    Loggable('debug')\n], DownSession.prototype, \"_callConfigureReceiver\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Session } from './session';\nimport { indexer } from '../../utils/indexer';\nimport { Loggable, logger } from '../../utils/logger';\nimport { ClientError, ServerError } from '../../utils/error-exception';\n// @FIXME: event emit/on 시 name 규칙 정하기\nexport class UpSession extends Session {\n    constructor(roomApiClient, config) {\n        super(roomApiClient, 'up', config);\n        this.streamIdMidMap = {};\n        this.addListeners();\n    }\n    /**\n     * 송출 스트림 등록 요청 API. 송출 스트림은 Audio, Video 총 2개를 조합으로 요청할 수 있다.\n     */\n    addStream({ audioType, audioTrack, audioExtraValue, videoType, localVideo, videoExtraValue, videoHd, record }) {\n        return new Promise((resolve, reject) => {\n            const negotiationId = indexer.get().toString();\n            this.emitter.once(negotiationId, (params) => __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                if ('code' in params) {\n                    logger.error(params);\n                    const error = new ServerError(params.code, params.message);\n                    return reject(error);\n                }\n                try {\n                    const { desc: offer, audio: audioOffer, video: videoOffer } = params;\n                    // 1. setRemoteDescription\n                    yield this.peerConnection.setRemoteDescription(offer);\n                    // 2. replace tracks\n                    audioOffer && (yield this._replaceAudioTrack(audioOffer, audioTrack));\n                    videoOffer && (yield this._replaceVideoTrack(videoOffer, localVideo));\n                    // 3. createAnswer & setLocalDescription\n                    const answer = yield this.peerConnection.createAnswer();\n                    yield this.peerConnection.setLocalDescription(answer);\n                    // 4. if multiple, set profiles equally\n                    //if (videoOffer && videoOffer.type === 'multiple') {\n                    if (videoOffer) {\n                        this._setVideoProfiles(videoOffer);\n                    }\n                    // 5. call setAnswer\n                    yield this._callSetAnswer({ negotiationId, desc: answer });\n                    // 6. save streamId : mid data\n                    // Q. type이 none일 때, streamId와 mid는 어떻게 나타날까?\n                    if (audioOffer && audioOffer.type !== 'none') {\n                        const prev = (_a = this.streamIdMidMap[audioOffer.streamId]) !== null && _a !== void 0 ? _a : {};\n                        this.streamIdMidMap[audioOffer.streamId] = Object.assign(Object.assign({}, prev), { default: audioOffer.mid });\n                    }\n                    if (videoOffer && videoOffer.type !== 'none') {\n                        videoOffer.profiles.forEach(p => {\n                            var _a;\n                            const prev = (_a = this.streamIdMidMap[videoOffer.streamId]) !== null && _a !== void 0 ? _a : {};\n                            this.streamIdMidMap[videoOffer.streamId] = Object.assign(Object.assign({}, prev), { [p.profile]: p.mid });\n                        });\n                    }\n                    // finally, resolve\n                    resolve({ audioOffer, videoOffer });\n                }\n                catch (err) {\n                    const message = err.message;\n                    reject(new ClientError(0, message));\n                }\n            }));\n            try {\n                this._callAddStream({\n                    negotiationId,\n                    audio: { type: audioType, extraValue: audioExtraValue },\n                    video: { type: videoType, extraValue: videoExtraValue, hd: videoHd },\n                    record\n                });\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n    }\n    /**\n     * 송출 스트림 속성 변경 API.\n     */\n    configureStream(streams) {\n        try {\n            return this._callConfigureStream({ streams });\n        }\n        catch (err) {\n            throw err;\n        }\n    }\n    removeStream(streamIds) {\n        return new Promise((resolve, reject) => {\n            const negotiationId = indexer.get().toString();\n            const streams = streamIds.map(streamId => ({ streamId }));\n            this.emitter.once(negotiationId, (params) => __awaiter(this, void 0, void 0, function* () {\n                if ('code' in params) {\n                    logger.error(params);\n                    const error = new ServerError(params.code, params.message);\n                    return reject(error);\n                }\n                try {\n                    const { desc: offer } = params;\n                    // 1. setRemoteDescription\n                    yield this.peerConnection.setRemoteDescription(offer);\n                    // 2. remove tracks\n                    this._removeTracks(streamIds);\n                    // 3. createAnswer & setLocalDescription\n                    const answer = yield this.peerConnection.createAnswer();\n                    yield this.peerConnection.setLocalDescription(answer);\n                    // 4. call setAnswer\n                    yield this._callSetAnswer({ negotiationId, desc: answer });\n                    // finally, resolve\n                    resolve();\n                }\n                catch (err) {\n                    const message = err.message;\n                    reject(new ClientError(0, message));\n                }\n            }));\n            try {\n                this._callRemoveStream({ negotiationId, streams });\n            }\n            catch (err) {\n                reject(err);\n            }\n        });\n    }\n    addListeners() {\n        this.jsonrpc.on('Conference.OnOffer', notification => {\n            const { params } = notification;\n            this.emitter.emit(params.negotiationId, params);\n        });\n        this.jsonrpc.on('Conference.OnError', notification => {\n            const { params } = notification;\n            if (params.negotiationId) {\n                this.emitter.emit(params.negotiationId, params);\n            }\n        });\n        this.jsonrpc.on('Conference.OnMessage', notification => {\n            const { params } = notification;\n            this.emitter.emit(params.type, params.data);\n        });\n        this.jsonrpc.on('Conference.OnProfile', notification => {\n            const { params } = notification;\n            this._replaceVideoProfiles(params.streams);\n        });\n    }\n    _callAddStream(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.AddStream';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n    _callSetAnswer(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.SetAnswer';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n    _callConfigureStream(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.ConfigureStream';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n    _callRemoveStream(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const method = 'Conference.RemoveStream';\n            const result = yield this.jsonrpc.call(method, params);\n            if ('error' in result) {\n                throw new ServerError(result.error.code, result.error.message);\n            }\n            return result;\n        });\n    }\n    _replaceAudioTrack(audioOffer, audioTrack) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const transceivers = this.peerConnection.getTransceivers();\n            const audioTransceiver = transceivers.find(t => t.mid === audioOffer.mid);\n            if (audioTrack && audioTransceiver) {\n                yield audioTransceiver.sender.replaceTrack(audioTrack);\n                audioTransceiver.direction = 'sendonly';\n            }\n        });\n    }\n    _replaceVideoTrack(videoOffer, localVideo) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const transceivers = this.peerConnection.getTransceivers();\n            for (const profile of videoOffer.profiles) {\n                const videoTransceiver = transceivers.find(t => t.mid === profile.mid);\n                if ((localVideo === null || localVideo === void 0 ? void 0 : localVideo.getMediaStreamTrack()) && videoTransceiver) {\n                    const cloneTrack = localVideo.getCloneTrack();\n                    yield videoTransceiver.sender.replaceTrack(cloneTrack);\n                    videoTransceiver.direction = 'sendonly';\n                }\n            }\n        });\n    }\n    /**\n     * multiple video 스트림의 profile 활성화 상태 통지.\n     * 활성화 상태의 기본은  l = 활성, m = 비활성, h = 비활성으로 한다.\n     * 이후 \"l\"  profile을 제외하고(\"l\" profile은 항상 활성 상태) 수신측의 profile 요청이 생기거나 없어져서 상태변경이 필요할때 통지한다.\n     * 대역폭을 효율적으로 사용하기 위해 클라이언트는 이 상태 값에 Tranceiver의 송출상태를 동기화하여 관리한다.\n     */\n    _replaceVideoProfiles(streams) {\n        const transceivers = this.peerConnection.getTransceivers();\n        streams.forEach(stream => {\n            stream.profiles.forEach(profile => {\n                const videoTransceiver = transceivers.find(t => t.mid === profile.mid);\n                if (videoTransceiver) {\n                    const params = videoTransceiver.sender.getParameters();\n                    params.encodings[0].active = profile.active;\n                    videoTransceiver.sender.setParameters(params);\n                }\n            });\n        });\n    }\n    _removeTracks(streamIds) {\n        const transceivers = this.peerConnection.getTransceivers();\n        streamIds.forEach(streamId => {\n            for (const name in this.streamIdMidMap[streamId]) {\n                const mid = this.streamIdMidMap[streamId][name];\n                const transceiver = transceivers.find(t => t.mid === mid);\n                if (transceiver) {\n                    this.peerConnection.removeTrack(transceiver.sender);\n                    delete this.streamIdMidMap[streamId][name];\n                }\n            }\n        });\n    }\n    /**\n     * MultipleVideoStream의 경우 SDP Answer 생성 뒤\n     * Transceiver.sender의 bitrate 파라미터를 OnOffer의 profiles내 정보와 동일하게 세팅해야 한다.\n     */\n    _setVideoProfiles(videoOffer) {\n        var _a, _b, _c;\n        const transceivers = this.peerConnection.getTransceivers();\n        for (const profile of videoOffer.profiles) {\n            const videoTransceiver = transceivers.find(t => t.mid === profile.mid);\n            if (videoTransceiver) {\n                const params = videoTransceiver.sender.getParameters();\n                const active = profile.active;\n                //const active = profile.profile === 'l';\n                const maxBitrate = Number(profile.bitrate);\n                const maxFramerate = profile.profile === 'l' ? (_a = this.config.maxFramerate) === null || _a === void 0 ? void 0 : _a.l : profile.profile === 'm' ? (_b = this.config.maxFramerate) === null || _b === void 0 ? void 0 : _b.m : (_c = this.config.maxFramerate) === null || _c === void 0 ? void 0 : _c.h;\n                const scaleResolutionDownBy = profile.profile === 'l' ? 3.0 : profile.profile === 'm' ? 2.0 : undefined;\n                // @ts-ignore\n                params.encodings = [{ active, maxBitrate, maxFramerate }];\n                videoTransceiver.sender.setParameters(params);\n            }\n        }\n    }\n}\n__decorate([\n    Loggable('info')\n], UpSession.prototype, \"addStream\", null);\n__decorate([\n    Loggable('info')\n], UpSession.prototype, \"configureStream\", null);\n__decorate([\n    Loggable('info')\n], UpSession.prototype, \"removeStream\", null);\n__decorate([\n    Loggable('info')\n], UpSession.prototype, \"addListeners\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_callAddStream\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_callSetAnswer\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_callConfigureStream\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_callRemoveStream\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_replaceAudioTrack\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_replaceVideoTrack\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_replaceVideoProfiles\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_removeTracks\", null);\n__decorate([\n    Loggable('debug')\n], UpSession.prototype, \"_setVideoProfiles\", null);\n","export const some = (object, fn) => {\n    for (const key in object) {\n        if (fn(object[key]))\n            return true;\n    }\n    return false;\n};\nexport const filterToArray = (object, fn) => {\n    const filtered = [];\n    for (const key in object) {\n        if (fn(object[key]))\n            filtered.push(object[key]);\n    }\n    return filtered;\n};\nexport const filter = (object, fn) => {\n    const filtered = {};\n    for (const key in object) {\n        if (fn(object[key]))\n            filtered[key] = object[key];\n    }\n    return filtered;\n};\nexport const size = (object) => {\n    return Object.keys(object).length;\n};\nexport const objectToArray = (object) => {\n    return Object.values(object);\n};\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Loggable } from \"../../utils/logger\";\nexport class Remote {\n    constructor() {\n        this.extraValue = '';\n        this.participantId = '';\n    }\n    getParticipantId() {\n        return this.participantId;\n    }\n    getExtraValue() {\n        return this.extraValue;\n    }\n    _setExtraValue(extraValue = '') {\n        this.extraValue = extraValue;\n    }\n    _setParticipantId(participantId) {\n        this.participantId = participantId;\n    }\n}\n__decorate([\n    Loggable('info')\n], Remote.prototype, \"getParticipantId\", null);\n__decorate([\n    Loggable('info')\n], Remote.prototype, \"getExtraValue\", null);\n__decorate([\n    Loggable('info')\n], Remote.prototype, \"_setExtraValue\", null);\n__decorate([\n    Loggable('debug')\n], Remote.prototype, \"_setParticipantId\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Loggable } from '../../utils/logger';\nimport { Remote } from './remote';\nexport class RemoteVideo extends Remote {\n    constructor(stream, participant) {\n        super();\n        this.type = 'none';\n        this.extraValue = '';\n        this.videoId = -1;\n        this.receiverId = '';\n        this.participantId = '';\n        this.paused = false; //내가 수신하지 않음\n        this.active = true; //해당 참여자가 자신의 비디오의 active를 변경함\n        this.profile = 'l';\n        this.statusUpdateFn = () => Promise.resolve();\n        this.videoId = stream.streamId;\n        this.videoElements = [];\n        this.type = stream.type;\n        this.extraValue = stream.extraValue || '';\n        this.participantId = participant.id;\n    }\n    get isEnabled() {\n        var _a;\n        return (_a = this.mediaStreamTrack) === null || _a === void 0 ? void 0 : _a.enabled;\n    }\n    setMediaStreamEnabled(enabled) {\n        if (this.mediaStreamTrack) {\n            this.mediaStreamTrack.enabled = enabled;\n        }\n    }\n    _setType(type) {\n        this.type = type;\n    }\n    _setRemoteTrack(mediaStreamTrack) {\n        this.mediaStreamTrack = mediaStreamTrack;\n    }\n    attach(element = undefined) {\n        if (!this.mediaStreamTrack) {\n            return;\n        }\n        let videoElement;\n        if (element) {\n            videoElement = element;\n        }\n        else {\n            videoElement = document.createElement('video');\n        }\n        const mediaStream = this.getMediaStream();\n        videoElement.srcObject = mediaStream ? mediaStream : null;\n        videoElement.autoplay = true;\n        videoElement.playsInline = true;\n        this.videoElements.push(videoElement);\n        return videoElement;\n    }\n    detach() {\n        this.videoElements.forEach(element => element.remove());\n        this.videoElements = [];\n    }\n    stop() {\n        var _a;\n        (_a = this.mediaStreamTrack) === null || _a === void 0 ? void 0 : _a.stop();\n    }\n    getMediaStreamTrack() {\n        return this.mediaStreamTrack;\n    }\n    getMediaStream() {\n        if (this.mediaStreamTrack) {\n            return new MediaStream([this.mediaStreamTrack]);\n        }\n    }\n    getVideoId() {\n        return this.videoId;\n    }\n    _setVideoId(streamId) {\n        this.videoId = streamId;\n    }\n    _setReceiverId(receiverId, statusUpdateFn) {\n        this.receiverId = receiverId;\n        this.statusUpdateFn = statusUpdateFn;\n    }\n    _setActive(enabled) {\n        this.active = enabled;\n    }\n    setPaused(enabled) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.mediaStreamTrack) {\n                enabled = typeof enabled === 'boolean' ? enabled : true;\n                this.paused = enabled;\n                if (enabled !== this.mediaStreamTrack.enabled) {\n                    this.mediaStreamTrack.enabled = enabled;\n                    yield this.statusUpdateFn({\n                        receiverId: this.receiverId,\n                        pause: enabled,\n                    });\n                }\n            }\n        });\n    }\n    setQuality(quality) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (quality !== 'l' && quality !== 'm' && quality !== 'h') {\n                throw new Error('quality value must be one of l, m, h');\n            }\n            if (quality) {\n                this.profile = quality;\n                yield this.statusUpdateFn({\n                    receiverId: this.receiverId,\n                    profile: quality,\n                });\n            }\n        });\n    }\n}\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"setMediaStreamEnabled\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"_setType\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"_setRemoteTrack\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"attach\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"detach\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"stop\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"getMediaStreamTrack\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"getMediaStream\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"getVideoId\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"_setVideoId\", null);\n__decorate([\n    Loggable('debug')\n], RemoteVideo.prototype, \"_setReceiverId\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"_setActive\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"setPaused\", null);\n__decorate([\n    Loggable('info')\n], RemoteVideo.prototype, \"setQuality\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Loggable } from \"../../utils/logger\";\nimport { Remote } from \"./remote\";\nexport class RemoteAudio extends Remote {\n    constructor(stream, participant) {\n        super();\n        this.type = 'none';\n        this.extraValue = '';\n        this.audioId = -1;\n        this.receiverId = '';\n        this.participantId = '';\n        this.audioId = stream.streamId;\n        this.type = stream.type;\n        this.extraValue = stream.extraValue;\n        this.isAlwaysOn = stream.property.alwaysOn;\n        this.participantId = participant.id;\n    }\n    getAudioId() {\n        return this.audioId;\n    }\n    _setReceiverId(receiverId) {\n        this.receiverId = receiverId;\n    }\n    _setAlwaysOn(alwaysOn) {\n        this.isAlwaysOn = alwaysOn;\n    }\n}\n__decorate([\n    Loggable('info')\n], RemoteAudio.prototype, \"getAudioId\", null);\n__decorate([\n    Loggable('debug')\n], RemoteAudio.prototype, \"_setReceiverId\", null);\n__decorate([\n    Loggable('info')\n], RemoteAudio.prototype, \"_setAlwaysOn\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { filterToArray, some, objectToArray } from '../../utils/object-util';\nimport { RemoteVideo } from '../remote/remote-video';\nimport { RemoteAudio } from '../remote/remote-audio';\nimport { Loggable } from '../../utils/logger';\nexport class RemoteParticipant {\n    constructor(participantId, trackFn, streams = []) {\n        this.streamIdMap = {};\n        this.audioMap = {};\n        this.videoMap = {};\n        this.id = participantId;\n        this.getTrackFn = trackFn;\n        this.streamIdMap = streams.reduce((streamIdMap, stream) => {\n            streamIdMap[stream.streamId] = stream;\n            if (stream.media === 'video') {\n                this.videoMap[stream.streamId] = new RemoteVideo(stream, this);\n            }\n            else if (stream.media === 'audio') {\n                this.audioMap[stream.streamId] = new RemoteAudio(stream, this);\n            }\n            return streamIdMap;\n        }, {});\n    }\n    get hasAudio() {\n        return some(this.streamIdMap, s => s.media === 'audio');\n    }\n    get hasVideo() {\n        return some(this.streamIdMap, s => s.media === 'video');\n    }\n    get audios() {\n        const remoteAudios = objectToArray(this.audioMap);\n        return remoteAudios;\n    }\n    get videos() {\n        const remoteVideos = objectToArray(this.videoMap);\n        return remoteVideos;\n    }\n    get isEnabledVideo() {\n        return some(this.streamIdMap, s => s.media === 'video' && s.property.active);\n    }\n    get isEnabledAudio() {\n        return some(this.streamIdMap, s => s.media === 'audio' && s.property.active);\n    }\n    _getSubscribedStreamIds() {\n        return this._getFilterStreamIds().assigned;\n    }\n    _getUnsubscribedStreamIds() {\n        return this._getFilterStreamIds().notAssigned;\n    }\n    getSubscribedVideos() {\n        const videoStreams = this._getFilterStreams().assigned;\n        const videos = videoStreams.map(stream => this.videoMap[stream.streamId]);\n        return videos;\n    }\n    getUnsubscribedVideos() {\n        const videoStreams = this._getFilterStreams().notAssigned;\n        const videos = videoStreams.map(stream => this.videoMap[stream.streamId]);\n        return videos;\n    }\n    getAudio(streamId) {\n        return this.audioMap[streamId];\n    }\n    getVideo(streamId) {\n        return this.videoMap[streamId];\n    }\n    _getVideoStreamIdAll() {\n        const streamIds = filterToArray(this.streamIdMap, s => s.media === 'video').map(s => s.streamId);\n        return streamIds;\n    }\n    _getVideoStreamAll() {\n        const streams = filterToArray(this.streamIdMap, s => s.media === 'video');\n        return streams;\n    }\n    _getFilterStreamIds() {\n        const videoStreams = this._getVideoStreamIdAll();\n        const videoTracks = videoStreams.map(id => this.getTrackFn(id));\n        return {\n            assigned: videoStreams.filter((_, i) => !!videoTracks[i]),\n            notAssigned: videoStreams.filter((_, i) => !videoTracks[i]),\n        };\n    }\n    _getFilterStreams() {\n        const videoStreams = this._getVideoStreamAll();\n        const videoTracks = videoStreams.map(stream => this.getTrackFn(stream.streamId));\n        return {\n            assigned: videoStreams.filter((_, i) => !!videoTracks[i]),\n            notAssigned: videoStreams.filter((_, i) => !videoTracks[i]),\n        };\n    }\n    /**\n     * @internal\n     */\n    _addStream(stream) {\n        this.streamIdMap[stream.streamId] = stream;\n        if (stream.media === 'video') {\n            this.videoMap[stream.streamId] = new RemoteVideo(stream, this);\n        }\n        else if (stream.media === 'audio') {\n            this.audioMap[stream.streamId] = new RemoteAudio(stream, this);\n        }\n    }\n    /**\n     * @internal\n     */\n    _updateStream({ streamId, property }) {\n        const next = Object.assign(Object.assign({}, this.streamIdMap[streamId]), { property });\n        this.streamIdMap[streamId] = next;\n    }\n    /**\n     * @internal\n     */\n    _removeStream(streamId) {\n        delete this.streamIdMap[streamId];\n        delete this.videoMap[streamId];\n        delete this.audioMap[streamId];\n    }\n}\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_getSubscribedStreamIds\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_getUnsubscribedStreamIds\", null);\n__decorate([\n    Loggable('info')\n], RemoteParticipant.prototype, \"getSubscribedVideos\", null);\n__decorate([\n    Loggable('info')\n], RemoteParticipant.prototype, \"getUnsubscribedVideos\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"getAudio\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"getVideo\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_getVideoStreamIdAll\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_getVideoStreamAll\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_getFilterStreamIds\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_getFilterStreams\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_addStream\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_updateStream\", null);\n__decorate([\n    Loggable('debug')\n], RemoteParticipant.prototype, \"_removeStream\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { objectToArray } from '../../utils/object-util';\nimport { Loggable } from '../../utils/logger';\nexport class LocalParticipant {\n    constructor() {\n        this.id = '';\n        this.audioMap = {};\n        this.videoMap = {};\n    }\n    get hasAudio() {\n        return objectToArray(this.audioMap).length > 0;\n    }\n    get hasVideo() {\n        return objectToArray(this.videoMap).length > 0;\n    }\n    setLocalAudio(audio) {\n        this.audioMap[audio.streamId] = audio;\n    }\n    setLocalVideo(video) {\n        this.videoMap[video.streamId] = video;\n    }\n    getAudio(streamId) {\n        return this.audioMap[streamId];\n    }\n    getVideo(streamId) {\n        return this.videoMap[streamId];\n    }\n    setLocalParticipantId(participantId) {\n        this.id = participantId;\n    }\n    stop() {\n        objectToArray(this.audioMap).forEach(audio => audio.stop());\n        objectToArray(this.videoMap).forEach(video => video.stop());\n    }\n    /**\n     * @internal\n     */\n    _removeStream(streamId) {\n        delete this.audioMap[streamId];\n        delete this.videoMap[streamId];\n    }\n}\n__decorate([\n    Loggable('info')\n], LocalParticipant.prototype, \"setLocalAudio\", null);\n__decorate([\n    Loggable('info')\n], LocalParticipant.prototype, \"setLocalVideo\", null);\n__decorate([\n    Loggable('info')\n], LocalParticipant.prototype, \"getAudio\", null);\n__decorate([\n    Loggable('info')\n], LocalParticipant.prototype, \"getVideo\", null);\n__decorate([\n    Loggable('info')\n], LocalParticipant.prototype, \"setLocalParticipantId\", null);\n__decorate([\n    Loggable('info')\n], LocalParticipant.prototype, \"stop\", null);\n__decorate([\n    Loggable('debug')\n], LocalParticipant.prototype, \"_removeStream\", null);\n","export const makeArray = (length, item) => new Array(length).fill(item);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Loggable } from \"../../utils/logger\";\nexport class Local {\n    constructor(mediaStreamTrack, extraValue) {\n        this.streamId = -1;\n        this.statusUpdateFn = () => Promise.resolve();\n        this.mediaStreamTrack = mediaStreamTrack;\n        this.extraValue = extraValue;\n    }\n    get isEnabled() {\n        return this.mediaStreamTrack.enabled;\n    }\n    get kind() {\n        return this.mediaStreamTrack.kind;\n    }\n    getMediaStreamTrack() {\n        return this.mediaStreamTrack;\n    }\n    getMediaStream() {\n        return new MediaStream([this.mediaStreamTrack]);\n    }\n    getStreamId() {\n        return this.streamId;\n    }\n    getExtraValue() {\n        return this.extraValue;\n    }\n    setExtraValue(value) {\n        this.extraValue = value;\n    }\n    setEnabled(enabled) {\n        return __awaiter(this, void 0, void 0, function* () {\n            enabled = typeof enabled === 'boolean' ? enabled : true;\n            if (enabled !== this.mediaStreamTrack.enabled) {\n                this.mediaStreamTrack.enabled = enabled;\n                yield this.statusUpdateFn({\n                    streamId: this.streamId,\n                    active: enabled,\n                });\n            }\n        });\n    }\n    /**\n     * @internal mute on/off 정보를 미디어 서버에 반영하기 위한 setup\n     */\n    _setStreamId(streamId, statusUpdateFn) {\n        this.streamId = streamId;\n        this.statusUpdateFn = statusUpdateFn;\n    }\n}\n__decorate([\n    Loggable('debug')\n], Local.prototype, \"getMediaStreamTrack\", null);\n__decorate([\n    Loggable('debug')\n], Local.prototype, \"getMediaStream\", null);\n__decorate([\n    Loggable('info')\n], Local.prototype, \"getStreamId\", null);\n__decorate([\n    Loggable('info')\n], Local.prototype, \"getExtraValue\", null);\n__decorate([\n    Loggable('info')\n], Local.prototype, \"setExtraValue\", null);\n__decorate([\n    Loggable('info')\n], Local.prototype, \"setEnabled\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Loggable } from '../../utils/logger';\nimport { Local } from './local';\nexport class LocalVideo extends Local {\n    constructor(mediaStreamTrack, type, extraValue) {\n        super(mediaStreamTrack, extraValue);\n        this.hd = false;\n        this.type = type;\n        this.videoElements = [];\n        this.cloneMediaStreamTrack = [];\n    }\n    attach(element = undefined) {\n        if (!this.mediaStreamTrack) {\n            return;\n        }\n        let videoElement;\n        if (element) {\n            videoElement = element;\n        }\n        else {\n            videoElement = document.createElement('video');\n        }\n        const mediaStream = this.getMediaStream();\n        videoElement.srcObject = mediaStream ? mediaStream : null;\n        videoElement.autoplay = true;\n        videoElement.playsInline = true;\n        this.videoElements.push(videoElement);\n        return videoElement;\n    }\n    detach() {\n        this.videoElements.forEach(element => element.remove());\n        this.videoElements = [];\n    }\n    stop() {\n        this.mediaStreamTrack.stop();\n        this.cloneMediaStreamTrack.forEach(track => track.stop());\n        this.cloneMediaStreamTrack = [];\n    }\n    setHd(flag) {\n        this.hd = flag;\n    }\n    getCloneTrack() {\n        const cloneTrack = this.getMediaStreamTrack().clone();\n        this.cloneMediaStreamTrack.push(cloneTrack);\n        return cloneTrack;\n    }\n}\n__decorate([\n    Loggable('debug')\n], LocalVideo.prototype, \"attach\", null);\n__decorate([\n    Loggable('debug')\n], LocalVideo.prototype, \"detach\", null);\n__decorate([\n    Loggable('info')\n], LocalVideo.prototype, \"stop\", null);\n__decorate([\n    Loggable('info')\n], LocalVideo.prototype, \"setHd\", null);\n__decorate([\n    Loggable('debug')\n], LocalVideo.prototype, \"getCloneTrack\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Loggable } from '../../utils/logger';\nimport { Local } from './local';\nexport class LocalAudio extends Local {\n    constructor(mediaStreamTrack, type, extraValue) {\n        super(mediaStreamTrack, extraValue);\n        this.isAlwaysOn = false;\n        this.type = type;\n    }\n    stop() {\n        this.mediaStreamTrack.stop();\n    }\n    setAlwaysOn(enabled) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.isAlwaysOn = typeof enabled === 'boolean' ? enabled : true;\n            yield this.statusUpdateFn({\n                streamId: this.streamId,\n                alwaysOn: this.isAlwaysOn,\n            });\n        });\n    }\n}\n__decorate([\n    Loggable('info')\n], LocalAudio.prototype, \"stop\", null);\n__decorate([\n    Loggable('info')\n], LocalAudio.prototype, \"setAlwaysOn\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ClientError } from '../../utils/error-exception';\nimport { logger, Loggable } from '../../utils/logger';\nimport { LocalAudio } from './local-audio';\nimport { LocalVideo } from './local-video';\nclass LocalMedia {\n    constructor(constraints = {}) {\n        this.conf = null;\n        this.audio = undefined;\n        this.video = undefined;\n        if (constraints.video) {\n            if (constraints.video === true)\n                constraints.video = {};\n        }\n        if (constraints.audio) {\n            if (constraints.audio === true)\n                constraints.audio = {};\n        }\n        this.constraints = constraints;\n    }\n    getDevice() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield navigator.mediaDevices.enumerateDevices();\n        });\n    }\n    getMicDevices() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return (yield this.getDevice()).filter(device => device.kind === 'audioinput' && device.deviceId);\n        });\n    }\n    getSpeakerDevices() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return (yield this.getDevice()).filter(device => device.kind === 'audiooutput' && device.deviceId);\n        });\n    }\n    getCameraDevices() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return (yield this.getDevice()).filter(device => device.kind === 'videoinput' && device.deviceId);\n        });\n    }\n    switchCamera(deviceId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.constraints) {\n                if (this.constraints.video) {\n                    this.constraints.video = Object.assign(this.constraints.video, { deviceId: { exact: deviceId } });\n                    if (this.conf && this.video) {\n                        this.video.stop();\n                        yield this.conf.unpublish([this.video]);\n                    }\n                    const mediaStream = yield navigator.mediaDevices.getUserMedia({\n                        video: this.constraints.video,\n                        audio: false\n                    });\n                    const [videoTrack] = mediaStream.getVideoTracks();\n                    if (videoTrack) {\n                        this.video = new LocalVideo(videoTrack, 'multiple');\n                        logger.debug('switch video track', 'id=' + videoTrack.id, 'label=' + videoTrack.label, 'enabled=' + videoTrack.enabled, 'kind=' + videoTrack.kind, 'muted=' + videoTrack.muted, 'readyState=' + videoTrack.readyState);\n                        if (this.conf)\n                            this.conf.publish([this.video]);\n                    }\n                }\n            }\n        });\n    }\n    switchMic(deviceId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.constraints) {\n                if (this.constraints.audio) {\n                    this.constraints.audio = Object.assign(this.constraints.audio, { deviceId: { exact: deviceId } });\n                    if (this.conf && this.audio) {\n                        this.audio.stop();\n                        yield this.conf.unpublish([this.audio]);\n                    }\n                    const mediaStream = yield navigator.mediaDevices.getUserMedia({\n                        video: false,\n                        audio: this.constraints.audio\n                    });\n                    const [audioTrack] = mediaStream.getAudioTracks();\n                    if (audioTrack) {\n                        this.audio = new LocalAudio(audioTrack, 'single');\n                        logger.debug('switch audio track', 'id=' + audioTrack.id, 'label=' + audioTrack.label, 'enabled=' + audioTrack.enabled, 'kind=' + audioTrack.kind, 'muted=' + audioTrack.muted, 'readyState=' + audioTrack.readyState);\n                        if (this.conf)\n                            this.conf.publish([this.audio]);\n                    }\n                }\n            }\n        });\n    }\n    getUserMedia() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.stop();\n            try {\n                const mediaStream = yield navigator.mediaDevices.getUserMedia(this.constraints);\n                const [audioTrack] = mediaStream.getAudioTracks();\n                const [videoTrack] = mediaStream.getVideoTracks();\n                logger.debug('got mediaStream', 'id=' + mediaStream.id, 'active=' + mediaStream.active);\n                if (audioTrack) {\n                    logger.debug('got audio track', 'id=' + audioTrack.id, 'label=' + audioTrack.label, 'enabled=' + audioTrack.enabled, 'kind=' + audioTrack.kind, 'muted=' + audioTrack.muted, 'readyState=' + audioTrack.readyState);\n                    if (audioTrack.readyState === 'ended') {\n                        throw new ClientError(0, 'audioTrack\\'s readyState was ended');\n                    }\n                }\n                if (videoTrack) {\n                    logger.debug('got video track', 'id=' + videoTrack.id, 'label=' + videoTrack.label, 'enabled=' + videoTrack.enabled, 'kind=' + videoTrack.kind, 'muted=' + videoTrack.muted, 'readyState=' + videoTrack.readyState);\n                    if (videoTrack.readyState === 'ended') {\n                        throw new ClientError(0, 'videoTrack\\'s readyState was ended');\n                    }\n                }\n                this.audio = audioTrack ? new LocalAudio(audioTrack, 'single') : undefined;\n                this.video = videoTrack ? new LocalVideo(videoTrack, 'multiple') : undefined;\n            }\n            catch (err) {\n                const message = err.message;\n                logger.error(message);\n                throw new ClientError(0, message);\n            }\n        });\n    }\n    stop() {\n        var _a, _b;\n        (_a = this.audio) === null || _a === void 0 ? void 0 : _a.stop();\n        (_b = this.video) === null || _b === void 0 ? void 0 : _b.stop();\n    }\n    setConference(conf) {\n        this.conf = conf;\n    }\n    setMediaStream(mediaStream) {\n        const [audioTrack] = mediaStream.getAudioTracks();\n        const [videoTrack] = mediaStream.getVideoTracks();\n        this.audio = audioTrack ? new LocalAudio(audioTrack, 'single') : undefined;\n        this.video = videoTrack ? new LocalVideo(videoTrack, 'multiple') : undefined;\n        if (audioTrack)\n            logger.debug('set media stream track', 'id=' + audioTrack.id, 'label=' + audioTrack.label, 'enabled=' + audioTrack.enabled, 'kind=' + audioTrack.kind, 'muted=' + audioTrack.muted, 'readyState=' + audioTrack.readyState);\n        if (videoTrack)\n            logger.debug('set media stream track', 'id=' + videoTrack.id, 'label=' + videoTrack.label, 'enabled=' + videoTrack.enabled, 'kind=' + videoTrack.kind, 'muted=' + videoTrack.muted, 'readyState=' + videoTrack.readyState);\n    }\n}\n__decorate([\n    Loggable('debug')\n], LocalMedia.prototype, \"getDevice\", null);\n__decorate([\n    Loggable('debug')\n], LocalMedia.prototype, \"getMicDevices\", null);\n__decorate([\n    Loggable('debug')\n], LocalMedia.prototype, \"getSpeakerDevices\", null);\n__decorate([\n    Loggable('debug')\n], LocalMedia.prototype, \"getCameraDevices\", null);\n__decorate([\n    Loggable('info')\n], LocalMedia.prototype, \"switchCamera\", null);\n__decorate([\n    Loggable('info')\n], LocalMedia.prototype, \"switchMic\", null);\n__decorate([\n    Loggable('info')\n], LocalMedia.prototype, \"getUserMedia\", null);\n__decorate([\n    Loggable('info')\n], LocalMedia.prototype, \"stop\", null);\n__decorate([\n    Loggable('info')\n], LocalMedia.prototype, \"setMediaStream\", null);\nexport { LocalMedia };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Loggable } from \"../../utils/logger\";\nexport class RemoteAudioElements {\n    constructor() {\n        this.audioReceivers = [];\n        this.audioElements = [];\n    }\n    _setReceivers(audioReceivers) {\n        this.audioReceivers = audioReceivers;\n    }\n    attach() {\n        const audioElements = this.audioReceivers.map((audioReceiver) => {\n            const audioElement = document.createElement('audio');\n            audioElement.srcObject = this._getMediaStream(audioReceiver);\n            audioElement.autoplay = true;\n            return audioElement;\n        });\n        this.audioElements = this.audioElements.concat(audioElements);\n        return this.audioElements;\n    }\n    detach() {\n        this.audioElements.forEach(element => element.remove());\n        this.audioElements = [];\n    }\n    _getMediaStream(audioReceiver) {\n        const ms = new MediaStream();\n        ms.addTrack(audioReceiver.track);\n        return ms;\n    }\n    stop() {\n        this.audioReceivers.forEach(audioReceiver => audioReceiver.track.stop());\n    }\n}\n__decorate([\n    Loggable('debug')\n], RemoteAudioElements.prototype, \"_setReceivers\", null);\n__decorate([\n    Loggable('debug')\n], RemoteAudioElements.prototype, \"attach\", null);\n__decorate([\n    Loggable('debug')\n], RemoteAudioElements.prototype, \"detach\", null);\n__decorate([\n    Loggable('debug')\n], RemoteAudioElements.prototype, \"_getMediaStream\", null);\n__decorate([\n    Loggable('info')\n], RemoteAudioElements.prototype, \"stop\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Loggable, logger } from '../../utils/logger';\nimport { LocalAudio } from './local-audio';\nimport { LocalVideo } from './local-video';\nclass LocalScreen {\n    constructor(constraints = {}) {\n        this.conf = null;\n        this.audio = undefined;\n        this.video = undefined;\n        if (constraints.video) {\n            if (constraints.video === true)\n                constraints.video = {};\n        }\n        if (constraints.audio) {\n            if (constraints.audio === true)\n                constraints.audio = {};\n        }\n        this.constraints = constraints;\n    }\n    switchDisplay() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.constraints) {\n                if (this.constraints.video) {\n                    if (this.conf && this.video) {\n                        yield this.conf.unpublish([this]);\n                    }\n                    yield this.getDisplayMedia();\n                    if (this.conf && this.video)\n                        this.conf.publish([this]);\n                }\n            }\n        });\n    }\n    getDisplayMedia() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.stop();\n            const mediaStream = yield navigator.mediaDevices.getDisplayMedia(this.constraints);\n            const [audioTrack] = mediaStream.getAudioTracks();\n            const [videoTrack] = mediaStream.getVideoTracks();\n            this.audio = audioTrack ? new LocalAudio(audioTrack, 'single') : undefined;\n            this.video = videoTrack ? new LocalVideo(videoTrack, 'single') : undefined;\n            logger.debug('got display stream', 'id=' + mediaStream.id, 'active=' + mediaStream.active);\n            if (audioTrack)\n                logger.debug('got display media track', 'id=' + audioTrack.id, 'label=' + audioTrack.label, 'enabled=' + audioTrack.enabled, 'kind=' + audioTrack.kind, 'muted=' + audioTrack.muted, 'readyState=' + audioTrack.readyState);\n            if (videoTrack)\n                logger.debug('got display media track', 'id=' + videoTrack.id, 'label=' + videoTrack.label, 'enabled=' + videoTrack.enabled, 'kind=' + videoTrack.kind, 'muted=' + videoTrack.muted, 'readyState=' + videoTrack.readyState);\n        });\n    }\n    stop() {\n        var _a, _b;\n        (_a = this.audio) === null || _a === void 0 ? void 0 : _a.stop();\n        (_b = this.video) === null || _b === void 0 ? void 0 : _b.stop();\n    }\n    setConference(conf) {\n        this.conf = conf;\n    }\n}\n__decorate([\n    Loggable('debug')\n], LocalScreen.prototype, \"switchDisplay\", null);\n__decorate([\n    Loggable('info')\n], LocalScreen.prototype, \"getDisplayMedia\", null);\n__decorate([\n    Loggable('info')\n], LocalScreen.prototype, \"stop\", null);\nexport { LocalScreen };\n","export var RoomEventName;\n(function (RoomEventName) {\n    RoomEventName[\"CONNECTING\"] = \"connection\";\n    RoomEventName[\"CONNECTED\"] = \"connected\";\n    RoomEventName[\"DISCONNECTED\"] = \"disconnected\";\n    RoomEventName[\"PARTICIPANTENTERED\"] = \"participantEntered\";\n    RoomEventName[\"PARTICIPANTLEFT\"] = \"participantLeft\";\n    RoomEventName[\"LOCALVIDEOPUBLISHED\"] = \"localVideoPublished\";\n    RoomEventName[\"LOCALVIDEOUNPUBLISHED\"] = \"localVideoUnpublished\";\n    RoomEventName[\"LOCALAUDIOPUBLISHED\"] = \"localAudioPublished\";\n    RoomEventName[\"LOCALAUDIOUNPUBLISHED\"] = \"localAudioUnpublished\";\n    RoomEventName[\"REMOTEVIDEOPUBLISHED\"] = \"remoteVideoPublished\";\n    RoomEventName[\"REMOTEVIDEOUNPUBLISHED\"] = \"remoteVideoUnpublished\";\n    RoomEventName[\"REMOTEAUDIOPUBLISHED\"] = \"remoteAudioPublished\";\n    RoomEventName[\"REMOTEAUDIOUNPUBLISHED\"] = \"remoteAudioUnpublished\";\n    RoomEventName[\"LOCALAUDIOLEVELUPDATED\"] = \"localAudioLevelUpdated\";\n    RoomEventName[\"REMOTEAUDIOLEVELUPDATED\"] = \"remoteAudioLevelUpdated\";\n    RoomEventName[\"REMOTEAUDIOSUBSCRIBED\"] = \"remoteAudioSubscribed\";\n    RoomEventName[\"REMOTEAUDIOUNSUBSCRIBED\"] = \"remoteAudioUnsubscribed\";\n    RoomEventName[\"REMOTEVIDEOSTATECHANGED\"] = \"remoteVideoStateChanged\";\n    RoomEventName[\"REMOTEAUDIOSTATECHANGED\"] = \"remoteAudioStateChanged\";\n    RoomEventName[\"ERROR\"] = \"error\";\n    RoomEventName[\"RECORDFAILED\"] = \"recordFailed\";\n})(RoomEventName || (RoomEventName = {}));\n;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport EventEmitter from 'eventemitter3';\nimport { RoomApiClient } from './room-api-client';\nimport { DownSession } from '../session/down-session';\nimport { UpSession } from '../session/up-session';\nimport { logger, Loggable } from '../../utils/logger';\nimport { RemoteParticipant } from '../participant/remote-participant';\nimport { LocalParticipant } from '../participant/local-participant';\nimport { filterToArray, objectToArray } from '../../utils/object-util';\nimport { makeArray } from '../../utils/make-array';\nimport { LocalVideo } from '../local/local-video';\nimport { LocalAudio } from '../local/local-audio';\nimport { LocalMedia } from '../local/local-media';\nimport { RemoteAudioElements } from '../remote/remote-audio-elements';\nimport { LocalScreen } from '../local/local-screen';\nimport { RoomEventName } from '../../utils/room-event-enum';\nimport { ClientError } from '../../utils/error-exception';\nconst ConnectionStep = {\n    ENTERROOM: 1,\n    UPSESSION: 2,\n    DOWNSESSION: 3,\n    TOTALSTEP: 3\n};\nexport class Conference extends EventEmitter {\n    constructor(authResponse, config = {}) {\n        super();\n        this.participantMap = {}; // 참여자 아이디 - 참여자 객체\n        this.receiverMap = {}; // 리시버 아이디 - 스트림 아이디 or null\n        this.audioStreamIdMap = {}; // 오디오 스트림 아이디 - 참여자 아이디\n        this.config = {\n            videoReceiverInitialCount: 10,\n            videoReceiverGrowthRate: 5,\n            videoReceiverMaximumCount: 50,\n            audioOption: 1,\n            cpuOveruseDetection: true,\n            maxFramerate: {\n                l: 10,\n                m: 20,\n                h: 30\n            }\n        };\n        this.audioOccupants = {};\n        this.audioLvlUpdateTs = 0;\n        this.subscribeStreamIdsQueue = [];\n        this.unsubscribeStreamIdsQueue = [];\n        this.streamIdsQueueInterval = -1;\n        this.isStreamIdsQueueWorking = false;\n        Object.assign(this.config, config);\n        logger.debug(this.config);\n        this.roomApiClient = new RoomApiClient(this.config.audioOption);\n        this.upSession = new UpSession(this.roomApiClient, {\n            cpuOveruseDetection: this.config.cpuOveruseDetection,\n            maxFramerate: this.config.maxFramerate\n        });\n        this.downSession = new DownSession(this.roomApiClient, {\n            cpuOveruseDetection: this.config.cpuOveruseDetection,\n        });\n        this.localParticipant = new LocalParticipant();\n        this.remoteAudioElements = new RemoteAudioElements();\n        this.authResponse = authResponse;\n        this.roomStatus = 'created';\n        this.upSession.on('error', (msg) => {\n            this._dispatch(RoomEventName.ERROR, msg);\n        });\n        this.upSession.on('RecordFailed', (msg) => {\n            this._dispatch(RoomEventName.RECORDFAILED, msg);\n        });\n        this.downSession.on('error', (msg) => {\n            this._dispatch(RoomEventName.ERROR, msg);\n        });\n        const apiServerUrl = this.authResponse.api;\n        const httpHeaders = {\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${this.authResponse.token}`,\n            },\n        };\n        this.roomApiClient.setHost(apiServerUrl);\n        this.roomApiClient.setHeaders(httpHeaders);\n        this.roomStatus = 'initiated';\n    }\n    get remoteParticipants() {\n        return filterToArray(this.participantMap, p => p.id !== this.localParticipant.id);\n    }\n    /**\n     * 미디어 서버로 부터 참여자 id를 발급받고, 세션을 생성한다.\n     */\n    connect(roomId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.roomApiClient.setRoomId(roomId);\n            const res = yield this.roomApiClient.sendEnterRoom();\n            this.roomApiClient.setParticipantId(res.result.participantId);\n            this.localParticipant.setLocalParticipantId(res.result.participantId);\n            this._handleParticipantsInfo();\n            this._handleReceivers();\n            this._dispatch(RoomEventName.CONNECTING, { progress: ConnectionStep.ENTERROOM / ConnectionStep.TOTALSTEP * 100 });\n            const iceServers = this.authResponse.iceServers;\n            yield this.upSession.create({ iceServers });\n            this._dispatch(RoomEventName.CONNECTING, { progress: ConnectionStep.UPSESSION / ConnectionStep.TOTALSTEP * 100 });\n            yield this.downSession.create({ iceServers });\n            this._dispatch(RoomEventName.CONNECTING, { progress: ConnectionStep.DOWNSESSION / ConnectionStep.TOTALSTEP * 100 });\n            this.roomStatus = 'connected';\n            // subscribe시 큐에 저장된 streamId를 하나씩 꺼내서 assign 함\n            this.streamIdsQueueInterval = window.setInterval(() => __awaiter(this, void 0, void 0, function* () {\n                if (this.isStreamIdsQueueWorking === false) {\n                    if (this.unsubscribeStreamIdsQueue.length) {\n                        const lastData = this.unsubscribeStreamIdsQueue.shift();\n                        if (lastData) {\n                            this.isStreamIdsQueueWorking = true;\n                            const pairs = lastData.pairs;\n                            try {\n                                yield this.downSession.assignStream(pairs);\n                                let remoteVideos = [];\n                                // 3. receiverMap에 stream 정보 업데이트\n                                pairs.forEach(({ receiverId }) => {\n                                    this.remoteParticipants.forEach((participant) => {\n                                        const remoteVideo = participant.videos.find(remoteVideo => remoteVideo.receiverId === receiverId);\n                                        if (remoteVideo) {\n                                            remoteVideo._setReceiverId('');\n                                            remoteVideo._setRemoteTrack(null);\n                                            remoteVideos.push(remoteVideo);\n                                        }\n                                    });\n                                    console.log('unsubscribe-before', JSON.parse(JSON.stringify(this.receiverMap)));\n                                    this.receiverMap[receiverId].streamId = null;\n                                    console.log('unsubscribe-after', JSON.parse(JSON.stringify(this.receiverMap)));\n                                });\n                                this.emit(lastData.key, remoteVideos);\n                            }\n                            catch (err) {\n                                this.emit(lastData.key, err);\n                            }\n                            this.isStreamIdsQueueWorking = false;\n                        }\n                    }\n                    else {\n                        if (this.subscribeStreamIdsQueue.length) {\n                            const lastData = this.subscribeStreamIdsQueue.shift();\n                            if (lastData) {\n                                this.isStreamIdsQueueWorking = true;\n                                let remoteVideos = [];\n                                try {\n                                    for (let streamId of lastData.streamIds) {\n                                        console.log('subscribe-before', JSON.parse(JSON.stringify(this.receiverMap)));\n                                        const removeVideo = yield this._assignVideoStream([streamId]);\n                                        if (removeVideo)\n                                            remoteVideos = [...removeVideo];\n                                        console.log('subscribe-after', JSON.parse(JSON.stringify(this.receiverMap)));\n                                    }\n                                    this.emit(lastData.key, remoteVideos);\n                                }\n                                catch (err) {\n                                    //assign stream error\n                                    this.emit(lastData.key, err);\n                                }\n                                this.isStreamIdsQueueWorking = false;\n                            }\n                        }\n                    }\n                }\n            }), 100);\n        });\n    }\n    /**\n     * 생성된 세션을 제거한다.\n     */\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.roomStatus !== 'connected') {\n                return logger.error('not connected.');\n            }\n            window.clearInterval(this.streamIdsQueueInterval);\n            this.streamIdsQueueInterval = -1;\n            this.isStreamIdsQueueWorking = false;\n            this.remoteAudioElements.detach();\n            this.remoteAudioElements.stop();\n            yield this.upSession.destroy();\n            yield this.downSession.destroy();\n            this.roomStatus = 'disconnected';\n            this._dispatch(RoomEventName.DISCONNECTED);\n        });\n    }\n    /**\n     * 내 미디어를 다른 참여자에게 공유한다.\n     */\n    publish(localMedias, isRecording = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const promise = (media) => {\n                let localAudio;\n                let localVideo;\n                if (media instanceof LocalMedia || media instanceof LocalScreen) {\n                    localAudio = media.audio;\n                    localVideo = media.video;\n                }\n                else if (media instanceof LocalAudio) {\n                    localAudio = media;\n                }\n                else if (media instanceof LocalVideo) {\n                    localVideo = media;\n                }\n                return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                    try {\n                        const { audioOffer, videoOffer } = yield this.upSession.addStream({\n                            audioType: localAudio ? localAudio.type : 'none',\n                            audioTrack: localAudio === null || localAudio === void 0 ? void 0 : localAudio.getMediaStreamTrack(),\n                            audioExtraValue: localAudio === null || localAudio === void 0 ? void 0 : localAudio.extraValue,\n                            videoType: localVideo ? localVideo.type : 'none',\n                            localVideo: localVideo || undefined,\n                            videoExtraValue: localVideo === null || localVideo === void 0 ? void 0 : localVideo.extraValue,\n                            videoHd: localVideo === null || localVideo === void 0 ? void 0 : localVideo.hd,\n                            record: isRecording\n                        });\n                        if (media instanceof LocalMedia) {\n                            media.setConference(this);\n                        }\n                        if (audioOffer && localAudio) {\n                            localAudio._setStreamId(audioOffer.streamId, (config) => __awaiter(this, void 0, void 0, function* () {\n                                this.upSession.configureStream([config]);\n                            }));\n                            this.localParticipant.setLocalAudio(localAudio);\n                            this._dispatch(RoomEventName.LOCALAUDIOPUBLISHED, {\n                                localAudio: localAudio\n                            });\n                        }\n                        if (videoOffer && localVideo) {\n                            localVideo._setStreamId(videoOffer.streamId, (config) => __awaiter(this, void 0, void 0, function* () {\n                                this.upSession.configureStream([config]);\n                            }));\n                            this.localParticipant.setLocalVideo(localVideo);\n                            this._dispatch(RoomEventName.LOCALVIDEOPUBLISHED, {\n                                localVideo: localVideo\n                            });\n                        }\n                        resolve(media);\n                    }\n                    catch (err) {\n                        reject(err);\n                    }\n                }));\n            };\n            const promiseArr = localMedias.map(localMedia => promise(localMedia));\n            try {\n                yield Promise.all(promiseArr);\n            }\n            catch (err) {\n                throw err;\n            }\n        });\n    }\n    /**\n     * 다른 참여자에게 공유한 내 미디어를 취소한다.\n     */\n    unpublish(localMedias) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const streamIds = [];\n            localMedias.forEach((localMedia) => {\n                if (localMedia instanceof LocalMedia || localMedia instanceof LocalScreen) {\n                    localMedia.audio && streamIds.push(localMedia.audio.getStreamId());\n                    localMedia.video && streamIds.push(localMedia.video.getStreamId());\n                }\n                else {\n                    streamIds.push(localMedia.getStreamId());\n                }\n            });\n            try {\n                yield this.upSession.removeStream(streamIds);\n            }\n            catch (err) {\n                throw err;\n            }\n        });\n    }\n    /**\n     * 다른 참여자의 비디오를 가져온다.\n     */\n    subscribe(participantOrStreamIds) {\n        return new Promise((resolve, reject) => {\n            let unsubscribedStreamIds = [];\n            if (Array.isArray(participantOrStreamIds)) {\n                unsubscribedStreamIds = participantOrStreamIds;\n            }\n            else {\n                unsubscribedStreamIds = participantOrStreamIds._getUnsubscribedStreamIds();\n            }\n            const intersection = this._checkAlreadySubscribe(unsubscribedStreamIds);\n            if (intersection.length) {\n                return reject(new ClientError(0, 'already have a subscription to stream. ' + intersection));\n            }\n            const key = Math.random().toString(36).substring(2, 12);\n            this.subscribeStreamIdsQueue.push({\n                key: key,\n                streamIds: unsubscribedStreamIds\n            });\n            this.once(key, (remoteVideos) => {\n                if (remoteVideos instanceof Error) {\n                    return reject(remoteVideos);\n                }\n                resolve(remoteVideos);\n            });\n        });\n    }\n    /**\n     * 다른 참여자의 비디오 가져오는걸 취소한다.\n     */\n    unsubscribe(participantOrStreamIds) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                const videoStreamIds = participantOrStreamIds instanceof RemoteParticipant\n                    ? participantOrStreamIds._getSubscribedStreamIds()\n                    : participantOrStreamIds;\n                // 1. streamId로 receiverId 찾기\n                const assignedStreamMap = Object.entries(this.receiverMap).reduce((streamMap, [receiverId, { type, streamId }]) => {\n                    if (streamId)\n                        streamMap[streamId] = { type, receiverId };\n                    return streamMap;\n                }, {});\n                const receiverIds = [];\n                videoStreamIds.forEach(streamId => {\n                    if (assignedStreamMap[streamId]) {\n                        receiverIds.push(assignedStreamMap[streamId].receiverId);\n                    }\n                });\n                // @NOTE: receiver에 할당된 stream을 지우기위해 0으로 전달\n                const pairs = receiverIds.map(receiverId => ({ receiverId, streamId: 0 }));\n                const key = Math.random().toString(36).substring(2, 12);\n                this.unsubscribeStreamIdsQueue.push({\n                    key: key,\n                    pairs: pairs\n                });\n                this.once(key, (remoteVideos) => {\n                    if (remoteVideos instanceof Error) {\n                        return reject(remoteVideos);\n                    }\n                    resolve(remoteVideos);\n                });\n            });\n        });\n    }\n    getParticipant(participantId) {\n        return this.participantMap[participantId];\n    }\n    getAudioOccupants() {\n        return objectToArray(this.audioOccupants);\n    }\n    getRemoteVideo(videoId) {\n        let remoteVideo = null;\n        this.remoteParticipants.some((remoteParticipant) => {\n            remoteVideo = remoteParticipant.videos.find((remoteVideo) => {\n                if (remoteVideo.videoId === videoId) {\n                    return true;\n                }\n            });\n            if (remoteVideo) {\n                return true;\n            }\n        });\n        return remoteVideo;\n    }\n    getRemoteAudio(audioId) {\n        let remoteAudio = null;\n        this.remoteParticipants.some((remoteParticipant) => {\n            remoteAudio = remoteParticipant.audios.find((remoteVideo) => {\n                if (remoteVideo.audioId === audioId) {\n                    return true;\n                }\n            });\n            if (remoteAudio) {\n                return true;\n            }\n        });\n        return remoteAudio;\n    }\n    _checkAlreadySubscribe(streamIds) {\n        const _streamIds = Object.values(this.receiverMap).filter(({ type, streamId }) => {\n            return type === 'video' && streamId !== null;\n        }).map(receiver => receiver.streamId);\n        const intersection = _streamIds.filter(streamId => {\n            if (streamId) {\n                return streamIds.includes(streamId);\n            }\n        });\n        return intersection;\n    }\n    /**\n     * 현재 리시버가 MAX를 초과했는지 체크한다.\n     */\n    _checkMaxReceiverCount() {\n        const currentCount = this._getCurrentReceiverCount();\n        if (currentCount >= this.config.videoReceiverMaximumCount) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * 현재 리시버 갯수를 반환한다.\n     */\n    _getCurrentReceiverCount() {\n        const receiverMap = {};\n        Object.entries(this.receiverMap).forEach(([key, value]) => {\n            if (value.streamId) {\n                receiverMap[key] = value;\n            }\n        });\n        const receiverIds = Object.keys(receiverMap);\n        const currentVideoSize = receiverIds.filter(receiverId => { var _a; return ((_a = this.downSession.getTrack(receiverId)) === null || _a === void 0 ? void 0 : _a.kind) === 'video'; }).length;\n        return currentVideoSize;\n    }\n    /**\n     * 타입별 리시버 갯수를 조절한다.\n     */\n    _setReceiverPool(videoSize) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._checkMaxReceiverCount())\n                throw new Error(`리시버 갯수는 maxReceiverCount를 초과할 수 없습니다.`);\n            yield this.downSession.addReceiver(makeArray(videoSize, { type: 'video' }));\n        });\n    }\n    _assignVideoStream(streamIds) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (streamIds.length === 0)\n                throw new Error(`빈 streamIds이 전달되었습니다.`);\n            if (this._checkMaxReceiverCount())\n                throw new Error(`리시버 갯수는 maxReceiverCount를 초과할 수 없습니다.`);\n            const intersection = this._checkAlreadySubscribe(streamIds);\n            if (intersection.length)\n                throw new Error('already have a subscription to stream. ' + intersection);\n            // 1. 구독중이지 않은 streamId와 video receiverId 매핑.\n            const receiverIds = Object.entries(this.receiverMap)\n                .filter(([_, { type, streamId }]) => {\n                return type === 'video' && streamId === null;\n            })\n                .map(([receiverId]) => receiverId)\n                .slice(0, streamIds.length);\n            // 2. 가용 리시버 체크\n            if (receiverIds.length === 0 || streamIds.length > receiverIds.length) {\n                //리시버 추가\n                let receiverCount = this.config.videoReceiverGrowthRate;\n                const currentReceiverCount = this._getCurrentReceiverCount();\n                if (currentReceiverCount + this.config.videoReceiverGrowthRate > this.config.videoReceiverMaximumCount) {\n                    receiverCount = this.config.videoReceiverMaximumCount - currentReceiverCount;\n                }\n                if (receiverCount > 0) {\n                    yield this._setReceiverPool(receiverCount);\n                    return yield this._assignVideoStream(streamIds);\n                }\n            }\n            else {\n                const pairs = streamIds.map((streamId, i) => {\n                    return { streamId, receiverId: receiverIds[i] };\n                });\n                // 3. receiverMap에 stream 정보 업데이트\n                pairs.forEach(({ streamId, receiverId }) => {\n                    const next = Object.assign(Object.assign({}, this.receiverMap[receiverId]), { streamId });\n                    this.receiverMap[receiverId] = next;\n                });\n                try {\n                    // 4. stream과 receiver 매핑\n                    yield this.downSession.assignStream(pairs);\n                    let remoteVideos = [];\n                    pairs.forEach(({ streamId, receiverId }) => {\n                        const remoteVideoTrack = this.downSession.getTrack(receiverId);\n                        if (remoteVideoTrack) {\n                            const participant = Object.values(this.participantMap).find((participant) => !!participant.streamIdMap[streamId]);\n                            if (participant) {\n                                const remoteVideo = participant.getVideo(streamId);\n                                remoteVideo._setReceiverId(receiverId, (config) => __awaiter(this, void 0, void 0, function* () {\n                                    this.downSession.configureReceiver([config]);\n                                }));\n                                remoteVideo._setRemoteTrack(remoteVideoTrack);\n                                remoteVideos.push(remoteVideo);\n                            }\n                        }\n                    });\n                    return remoteVideos;\n                }\n                catch (err) {\n                    // 5. 요청 실패시 해당 receiver들을 다시 사용할 수 있도록 변경\n                    pairs.forEach(({ receiverId }) => {\n                        this.receiverMap[receiverId].streamId = null;\n                    });\n                    throw err;\n                }\n            }\n        });\n    }\n    /**\n     * down session에서 전달된 참여자 정보를 처리한다.\n     */\n    _handleParticipantsInfo() {\n        const getTrackFn = (streamId) => {\n            for (const receiverId in this.receiverMap) {\n                if (this.receiverMap[receiverId].streamId === streamId) {\n                    const found = this.downSession.getTrack(receiverId);\n                    return found;\n                }\n            }\n        };\n        // TODO: 참여자 클래스 만들어서 room.participants 이런식으로 조회하기?\n        this.downSession.on('ChangedParticipantsInfo', ({ change }) => {\n            if (change.fullData) {\n                change.fullData.forEach(({ participantId, streams }) => {\n                    if (participantId !== this.localParticipant.id) {\n                        this.participantMap[participantId] = new RemoteParticipant(participantId, getTrackFn, streams);\n                        // @NOTE: 오디오 아이디로 참여자 아이디랑 바로 매치하기 위함\n                        streams === null || streams === void 0 ? void 0 : streams.filter(stream => {\n                            if (stream.media === 'audio') {\n                                this.audioStreamIdMap[stream.streamId.toString()] = participantId;\n                            }\n                        });\n                    }\n                });\n            }\n            else if (change.participantsEnter) {\n                change.participantsEnter.forEach(participantId => {\n                    this.participantMap[participantId] = new RemoteParticipant(participantId, getTrackFn);\n                });\n                change.participantsEnter.forEach(participantId => {\n                    return this._dispatch(RoomEventName.PARTICIPANTENTERED, { remoteParticipant: this.participantMap[participantId] });\n                });\n            }\n            else if (change.participantsLeave) {\n                change.participantsLeave.forEach(participantId => {\n                    delete this.participantMap[participantId];\n                    return this._dispatch(RoomEventName.PARTICIPANTLEFT, { remoteParticipantId: participantId });\n                });\n            }\n            else if (change.streamsAdded) {\n                change.streamsAdded.forEach((_a) => {\n                    var _b;\n                    var { participantId } = _a, stream = __rest(_a, [\"participantId\"]);\n                    (_b = this.participantMap[participantId]) === null || _b === void 0 ? void 0 : _b._addStream(stream);\n                    // @NOTE: 오디오 아이디로 참여자 아이디랑 바로 매치하기 위함\n                    if (stream.media === 'audio') {\n                        this.audioStreamIdMap[stream.streamId.toString()] = participantId;\n                    }\n                });\n                const audioStreams = change.streamsAdded.filter(({ participantId, media }) => {\n                    return participantId !== this.localParticipant.id && media === 'audio';\n                });\n                audioStreams.forEach(audioStream => {\n                    const participant = this.participantMap[audioStream.participantId];\n                    if (participant) {\n                        this._dispatch(RoomEventName.REMOTEAUDIOPUBLISHED, {\n                            remoteParticipant: participant,\n                            remoteAudio: participant.getAudio(audioStream.streamId)\n                        });\n                    }\n                });\n                const videoStreams = change.streamsAdded.filter(({ participantId, media }) => {\n                    return participantId !== this.localParticipant.id && media === 'video';\n                });\n                videoStreams.forEach(videoStream => {\n                    const participant = this.participantMap[videoStream.participantId];\n                    if (participant) {\n                        const remoteVideo = participant.getVideo(videoStream.streamId);\n                        this._dispatch(RoomEventName.REMOTEVIDEOPUBLISHED, {\n                            remoteParticipant: participant,\n                            remoteVideo: remoteVideo\n                        });\n                    }\n                });\n            }\n            else if (change.streamsUpdated) {\n                change.streamsUpdated.forEach(({ participantId, streamId, property }) => {\n                    var _a;\n                    if (participantId !== this.localParticipant.id) {\n                        (_a = this.participantMap[participantId]) === null || _a === void 0 ? void 0 : _a._updateStream({ streamId, property });\n                        if (property.hasOwnProperty('alwaysOn')) {\n                            //audio\n                            const participant = this.participantMap[participantId];\n                            if (participant) {\n                                const remoteAudio = participant.getAudio(streamId);\n                                remoteAudio._setAlwaysOn(property.alwaysOn);\n                                this._dispatch(RoomEventName.REMOTEAUDIOSTATECHANGED, {\n                                    remoteParticipant: participant,\n                                    remoteAudio: remoteAudio,\n                                });\n                            }\n                        }\n                        else {\n                            //video\n                            const participant = this.participantMap[participantId];\n                            if (participant) {\n                                const remoteVideo = participant.getVideo(streamId);\n                                //remoteVideo.setMediaStreamEnabled(property.active);\n                                remoteVideo._setActive(property.active);\n                                this._dispatch(RoomEventName.REMOTEVIDEOSTATECHANGED, {\n                                    remoteParticipant: participant,\n                                    remoteVideo: remoteVideo,\n                                });\n                            }\n                        }\n                    }\n                });\n            }\n            else if (change.streamsRemoved) {\n                change.streamsRemoved.forEach(({ participantId, streamId }) => {\n                    if (participantId === this.localParticipant.id) {\n                        const localAudio = this.localParticipant.getAudio(streamId);\n                        const localVideo = this.localParticipant.getVideo(streamId);\n                        if (localAudio) {\n                            this._dispatch(RoomEventName.LOCALAUDIOUNPUBLISHED, {\n                                localAudio: localAudio\n                            });\n                        }\n                        if (localVideo) {\n                            this._dispatch(RoomEventName.LOCALVIDEOUNPUBLISHED, {\n                                localVideo: localVideo\n                            });\n                        }\n                    }\n                    else {\n                        const remoteParticipant = this.participantMap[participantId];\n                        if (remoteParticipant) {\n                            const remoteAudio = remoteParticipant.getAudio(streamId);\n                            const remoteVideo = remoteParticipant.getVideo(streamId);\n                            if (remoteAudio) {\n                                this._dispatch(RoomEventName.REMOTEAUDIOUNPUBLISHED, {\n                                    remoteParticipant: remoteParticipant,\n                                    remoteAudio: remoteAudio\n                                });\n                            }\n                            if (remoteVideo) {\n                                this._dispatch(RoomEventName.REMOTEVIDEOUNPUBLISHED, {\n                                    remoteParticipant: remoteParticipant,\n                                    remoteVideo: remoteVideo\n                                });\n                            }\n                            remoteParticipant._removeStream(streamId);\n                        }\n                        const receiver = Object.values(this.receiverMap).find(receiver => {\n                            return streamId === receiver.streamId;\n                        });\n                        if (receiver) {\n                            receiver.streamId = null;\n                        }\n                    }\n                });\n            }\n        });\n        this.downSession.on('AudioLevel', (data) => {\n            const remoteAudios = [];\n            data.forEach(({ lvl, streamId }) => {\n                const min = 5; //최대치(0이 최대치이지만 이론적으로 달성될 수 없으므로 5로봄)\n                const max = 65; //묵음(127이 원래 최대치이지만 65이상은 묵음으로 봄)\n                if (lvl > 65) {\n                    lvl = 65;\n                }\n                if (lvl < 5) {\n                    lvl = 5;\n                }\n                const level = Math.floor((lvl - max) / (min - max) * 100);\n                const remoteParticipant = this.participantMap[this.audioStreamIdMap[streamId]];\n                if (!remoteParticipant) {\n                    const audio = objectToArray(this.localParticipant.audioMap).find(audio => audio.getStreamId() === streamId);\n                    if (audio) {\n                        this._dispatch(RoomEventName.LOCALAUDIOLEVELUPDATED, { level });\n                    }\n                }\n                else {\n                    remoteAudios.push({ level, remoteParticipant });\n                }\n            });\n            this._dispatch(RoomEventName.REMOTEAUDIOLEVELUPDATED, remoteAudios);\n        });\n        this.downSession.on('StreamChanged', ({ params }) => {\n            if (params.type === 'audio') {\n                const receiverId = params.receiverId;\n                const streamId = params.streamId;\n                const participantId = params.participantId;\n                if (streamId === 0) {\n                    //기존 발화자 삭제\n                    const _participant = this.audioOccupants[receiverId];\n                    if (_participant) {\n                        const participant = this.participantMap[_participant.id];\n                        const _receiverId = Object.keys(this.receiverMap).find((key) => {\n                            return receiverId === key;\n                        });\n                        if (participant && _receiverId) {\n                            //참여자의 오디오 리시버 업데이트\n                            const _streamId = this.receiverMap[_receiverId].streamId;\n                            if (_streamId) {\n                                const remoteAudio = participant.getAudio(_streamId);\n                                if (remoteAudio) {\n                                    remoteAudio._setReceiverId(receiverId);\n                                }\n                            }\n                        }\n                        this._dispatch(RoomEventName.REMOTEAUDIOUNSUBSCRIBED, { remoteParticipant: participant });\n                    }\n                }\n                else {\n                    const participant = this.participantMap[participantId];\n                    //참여자의 오디오 리시버 업데이트\n                    if (participant) {\n                        const remoteAudio = participant.getAudio(streamId);\n                        if (remoteAudio) {\n                            remoteAudio._setReceiverId(receiverId);\n                        }\n                    }\n                    //새 발화자 추가\n                    if (this.audioOccupants[receiverId] !== participant) {\n                        this.audioOccupants[receiverId] = participant;\n                        this._dispatch(RoomEventName.REMOTEAUDIOSUBSCRIBED, { remoteParticipant: participant });\n                    }\n                }\n            }\n        });\n    }\n    _handleReceivers() {\n        this.downSession.on('UpdatedReceivers', ({ name, receivers }) => __awaiter(this, void 0, void 0, function* () {\n            // 리시버 아이디, 이벤트 따라 일단 저장\n            // 케이스 1: 초기에 할당받은 경우\n            // 케이스 2: 리시버 추가 요청 후 결과를 받는 경우\n            // 케이스 3: 리시버 삭제 요청 후 결과를 받는 경우\n            if (name === 'init' || name === 'add') {\n                receivers.forEach(({ type, receiverId }) => {\n                    this.receiverMap[receiverId] = { type, streamId: null };\n                });\n            }\n            if (name === 'init') {\n                const participants = [];\n                objectToArray(this.participantMap).forEach((participant) => {\n                    participants.push(participant);\n                });\n                const audioReceivers = this.downSession.getFixedAudioReceiver();\n                this.remoteAudioElements._setReceivers(audioReceivers);\n                const remoteAudioElements = this.remoteAudioElements.attach();\n                remoteAudioElements.forEach(element => document.body.appendChild(element));\n                yield this._setReceiverPool(this.config.videoReceiverInitialCount);\n                this._dispatch(RoomEventName.CONNECTED, { remoteParticipants: participants });\n            }\n            if (name === 'remove') {\n                receivers.forEach(({ receiverId }) => {\n                    delete this.receiverMap[receiverId];\n                });\n            }\n        }));\n    }\n    getRemoteAudioLevels() {\n        const receivers = this.downSession.getFixedAudioReceiver();\n        const levels = {\n            remoteParticipants: []\n        };\n        let lastTimestamp = 0;\n        receivers.forEach((receiver, i) => {\n            const sc = receiver.getContributingSources();\n            const ss = sc.find(ss => ss.timestamp > this.audioLvlUpdateTs);\n            if (ss) {\n                lastTimestamp = ss.timestamp;\n                //remote\n                const remoteParticipant = this.participantMap[this.audioStreamIdMap[ss.source]];\n                if (remoteParticipant) {\n                    levels.remoteParticipants.push({\n                        remoteParticipant: remoteParticipant,\n                        level: ss.audioLevel || 0\n                    });\n                }\n            }\n        });\n        if (lastTimestamp > 0) {\n            this.audioLvlUpdateTs = lastTimestamp;\n        }\n        return levels;\n    }\n    switchSpeaker(deviceId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const fn = (audioElement) => {\n                return new Promise((resolve, reject) => {\n                    // @ts-ignore\n                    audioElement.setSinkId(deviceId).then(result => resolve(result)).catch(err => reject(err));\n                });\n            };\n            const promises = this.remoteAudioElements.audioElements.map((audioElement) => {\n                return fn(audioElement);\n            });\n            yield Promise.all(promises);\n        });\n    }\n    _dispatch(type, data) {\n        this.emit(type, data);\n    }\n}\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"connect\", null);\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"disconnect\", null);\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"publish\", null);\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"unpublish\", null);\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"subscribe\", null);\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"unsubscribe\", null);\n__decorate([\n    Loggable('debug')\n], Conference.prototype, \"getParticipant\", null);\n__decorate([\n    Loggable('debug')\n], Conference.prototype, \"getAudioOccupants\", null);\n__decorate([\n    Loggable('debug')\n], Conference.prototype, \"getRemoteVideo\", null);\n__decorate([\n    Loggable('debug')\n], Conference.prototype, \"getRemoteAudio\", null);\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"_checkMaxReceiverCount\", null);\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"_getCurrentReceiverCount\", null);\n__decorate([\n    Loggable('debug')\n], Conference.prototype, \"_setReceiverPool\", null);\n__decorate([\n    Loggable('info')\n], Conference.prototype, \"_assignVideoStream\", null);\n__decorate([\n    Loggable('debug')\n], Conference.prototype, \"_handleParticipantsInfo\", null);\n__decorate([\n    Loggable('debug')\n], Conference.prototype, \"_handleReceivers\", null);\n__decorate([\n    Loggable('debug')\n], Conference.prototype, \"switchSpeaker\", null);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AuthApiClient } from './modules/conference/auth-api-client';\nimport { SDK_VERSION } from './config';\nimport { logger, loggerSender, Loggable } from './utils/logger';\nimport { Conference } from './modules/conference/conference';\nimport { LocalAudio } from './modules/local/local-audio';\nimport { LocalVideo } from './modules/local/local-video';\nimport { LocalScreen } from './modules/local/local-screen';\nimport { LocalMedia } from './modules/local/local-media';\nimport EventEmitter from 'eventemitter3';\nimport userAgentParser from './utils/user-agent';\nclass ConnectLive {\n    constructor() {\n        new Error(\"connectlive can't create instances directly\");\n    }\n    static on(eventName, callback) {\n        this.emitter.on(eventName, callback);\n    }\n    static _startAuthTimer() {\n        if (this.authResponse) {\n            const timeout = Math.floor(this.authResponse.ttl * 0.9 * 1000);\n            let restTtl = timeout;\n            const fn = () => __awaiter(this, void 0, void 0, function* () {\n                if (this.authResponse) {\n                    try {\n                        const res = yield this.authApiClient.refreshToken(this.authResponse.token);\n                        this.authResponse.token = res.token;\n                        this.authResponse.ttl = res.ttl;\n                        this._startAuthTimer();\n                    }\n                    catch (err) {\n                        logger.error('token refresh error');\n                        const timeout = 600000;\n                        restTtl = restTtl - timeout;\n                        if (restTtl < 0) {\n                            this.emitter.emit('tokenRefreshError', err);\n                        }\n                        else {\n                            this.emitter.emit('tokenRefreshWarning', err);\n                            window.setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                                fn();\n                            }), timeout);\n                        }\n                    }\n                }\n            });\n            this.authRefreshTimer = window.setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                fn();\n            }), timeout);\n        }\n    }\n    static signIn(authConfig) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.authRefreshTimer > -1) {\n                this.signOut();\n            }\n            this.authResponse = yield this.authApiClient.authorize(authConfig);\n            this._startAuthTimer();\n            yield loggerSender.createWebSocket(this.authResponse.cnl, this.authResponse.token);\n            logger.info('[method][Function.signIn]', authConfig);\n            const device = userAgentParser.getDevice();\n            const engine = userAgentParser.getEngine();\n            const os = userAgentParser.getOS();\n            const browser = userAgentParser.getBrowser();\n            const cpu = userAgentParser.getCPU();\n            logger.debug('DEVICE TYPE =', device.type, ', DEVICE VENDOR =', device.vendor, 'ENGINE NAME =', engine.name, ', ENGINE VERSION =', engine.version, 'OS NAME =', os.name, ', OS VERSION =', os.version, 'BROWSER NAME =', browser.name, ', BROWSER VERSION =', browser.version, 'CPU =', cpu.architecture, 'SDK VERSION =', SDK_VERSION);\n        });\n    }\n    static signOut() {\n        window.clearTimeout(this.authRefreshTimer);\n        this.authRefreshTimer = -1;\n        this.authResponse = null;\n        loggerSender.close();\n    }\n    static createLocalMedia(constraints) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const localMedia = new LocalMedia(constraints);\n            yield localMedia.getUserMedia();\n            return localMedia;\n        });\n    }\n    static createLocalScreen(constraints) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const localScreen = new LocalScreen(constraints);\n            yield localScreen.getDisplayMedia();\n            return localScreen;\n        });\n    }\n    static createConference(config) {\n        if (this.authResponse) {\n            return new Conference(this.authResponse, config);\n        }\n        throw new Error('signIn is required');\n    }\n}\nConnectLive.emitter = new EventEmitter();\nConnectLive.authApiClient = new AuthApiClient();\nConnectLive.authRefreshTimer = -1;\nConnectLive.version = SDK_VERSION;\nConnectLive.logger = logger;\n__decorate([\n    Loggable('info')\n], ConnectLive, \"signOut\", null);\n__decorate([\n    Loggable('info')\n], ConnectLive, \"createLocalMedia\", null);\n__decorate([\n    Loggable('info')\n], ConnectLive, \"createLocalScreen\", null);\n__decorate([\n    Loggable('info')\n], ConnectLive, \"createConference\", null);\nexport default ConnectLive;\nexport { LocalMedia };\n","import { render } from \"./ConnectLiveConf.vue?vue&type=template&id=7f70e568&scoped=true\"\nimport script from \"./ConnectLiveConf.vue?vue&type=script&lang=js\"\nexport * from \"./ConnectLiveConf.vue?vue&type=script&lang=js\"\n\nimport \"./ConnectLiveConf.vue?vue&type=style&index=0&id=7f70e568&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\IdeaProjects\\\\chat-sample2\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7f70e568\"]])\n\nexport default __exports__","import { render } from \"./ChatMng.vue?vue&type=template&id=860f33b4&scoped=true\"\nimport script from \"./ChatMng.vue?vue&type=script&lang=js\"\nexport * from \"./ChatMng.vue?vue&type=script&lang=js\"\n\nimport \"./ChatMng.vue?vue&type=style&index=0&id=860f33b4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\user\\\\IdeaProjects\\\\chat-sample2\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-860f33b4\"]])\n\nexport default __exports__"],"names":["has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","module","exports","window","LIBVERSION","EMPTY","UNKNOWN","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","UA_MAX_LENGTH","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","EDGE","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SONY","XIAOMI","ZEBRA","FACEBOOK","extend","regexes","extensions","mergedRegexes","enumerize","arr","enums","toUpperCase","str1","str2","lowerize","indexOf","str","toLowerCase","majorize","version","replace","split","trim","substring","rgxMapper","ua","arrays","k","p","q","matches","match","regex","props","exec","test","strMapper","map","oldSafariMap","windowsVersionMap","browser","cpu","device","engine","os","UAParser","getResult","_ua","navigator","userAgent","_rgxmap","getBrowser","_browser","major","getCPU","_cpu","getDevice","_device","getEngine","_engine","getOS","_os","getUA","setUA","CPU","DEVICE","ENGINE","OS","$","jQuery","Zepto","parser","get","set","result","prop","_createElementVNode","class","style","ref","$setup","_hoisted_1","type","onClick","_createBlock","_component_ConnectLiveConf","key","$event","onKeyup","placeholder","PACKET_TYPES","PACKET_TYPES_REVERSE","keys","forEach","ERROR_PACKET","data","withNativeBlob","Blob","toString","withNativeArrayBuffer","ArrayBuffer","isView","obj","buffer","encodePacket","supportsBinary","callback","encodeBlobAsBase64","fileReader","FileReader","onload","content","readAsDataURL","chars","lookup","Uint8Array","charCodeAt","decode","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","arraybuffer","bytes","decodePacket","encodedPacket","binaryType","mapBinary","charAt","decodeBase64Packet","packetType","decoded","SEPARATOR","String","fromCharCode","encodePayload","packets","encodedPackets","count","packet","join","decodePayload","encodedPayload","decodedPacket","protocol","Emitter","mixin","addEventListener","_callbacks","removeEventListener","cb","callbacks","splice","emitReserved","hasListeners","globalThisShim","self","Function","pick","attr","reduce","acc","NATIVE_SET_TIMEOUT","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","installTimerFunctions","opts","useNativeTimers","setTimeoutFn","bind","clearTimeoutFn","BASE64_OVERHEAD","byteLength","utf8Length","Math","ceil","size","c","TransportError","Error","constructor","reason","description","super","Transport","writable","query","readyState","socket","onError","open","doOpen","close","doClose","onClose","send","write","onOpen","onData","onPacket","details","alphabet","prev","seed","num","encoded","floor","yeast","now","Date","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","value","XMLHttpRequest","err","hasCORS","XHR","xdomain","e","empty","hasXHR2","xhr","responseType","Polling","polling","location","isSSL","port","xd","hostname","xs","secure","forceBase64","poll","pause","onPause","total","doPoll","doWrite","uri","schema","timestampRequests","timestampParam","sid","b64","Number","encodedQuery","ipv6","path","request","assign","Request","req","method","xhrStatus","pollXhr","async","xscheme","extraHeaders","setDisableHeaderCheck","setRequestHeader","withCredentials","requestTimeout","timeout","onreadystatechange","status","onLoad","document","index","requestsCount","requests","cleanup","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","nextTick","isPromiseAvailable","Promise","resolve","then","usingBrowserWebSocket","defaultBinaryType","isReactNative","product","WS","check","protocols","headers","ws","addEventListeners","onopen","autoUnref","_socket","unref","onclose","closeEvent","onmessage","ev","onerror","lastPacket","options","compress","perMessageDeflate","Buffer","threshold","transports","websocket","re","parts","parse","src","b","m","source","host","authority","ipv6uri","pathNames","queryKey","regx","substr","$0","$1","$2","Socket","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","rejectUnauthorized","transportOptions","closeOnBeforeunload","id","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","transport","offlineEventListener","createTransport","EIO","priorWebsocketSuccess","shift","setTransport","onDrain","probe","failed","onTransportOpen","msg","upgrading","flush","freezeTransport","error","onTransportClose","onupgrade","to","onHandshake","JSON","resetPingTimeout","sendPacket","code","filterUpgrades","maxPayload","getWritablePackets","shouldCheckPayloadSize","payloadSize","cleanupAndClose","waitForUpgrade","filteredUpgrades","url","loc","href","withNativeFile","File","isBinary","hasBinary","toJSON","isArray","deconstructPacket","buffers","packetData","pack","_deconstructPacket","attachments","_placeholder","newData","reconstructPacket","_reconstructPacket","PacketType","Encoder","replacer","encode","EVENT","ACK","encodeAsString","BINARY_EVENT","BINARY_ACK","encodeAsBinary","nsp","stringify","deconstruction","unshift","Decoder","reviver","add","decodeString","reconstructor","BinaryReconstructor","takeBinaryData","start","buf","next","payload","tryParse","isPayloadValid","static","CONNECT","DISCONNECT","CONNECT_ERROR","destroy","finishedReconstruction","reconPack","binData","RESERVED_EVENTS","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","connected","receiveBuffer","sendBuffer","ids","acks","flags","auth","_autoConnect","disconnected","subEvents","subs","onpacket","active","_readyState","ack","pop","_registerAckCallback","isTransportWritable","discardPacket","volatile","notifyOutgoingListeners","timer","_packet","sameNamespace","onconnect","onevent","onack","ondisconnect","message","emitEvent","_anyListeners","sent","emitBuffered","subDestroy","onAny","prependAny","offAny","listenersAny","onAnyOutgoing","_anyOutgoingListeners","prependAnyOutgoing","offAnyOutgoing","listenersAnyOutgoing","Backoff","ms","min","max","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","Manager","_a","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","encoder","decoder","autoConnect","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","skipReconnect","openSubDestroy","errorSub","onping","ondata","ondecoded","_destroy","_close","delay","onreconnect","attempt","cache","parsed","newConnection","forceNew","multiplex","autoplay","playsInline","_createElementBlock","disabled","_Fragment","_renderList","item","deviceId","label","_hoisted_5","_toDisplayString","participant","_createVNode","_component_voice_meter","level","videos","video","_component_remote_video","remoteVideo","_hoisted_12","height","$data","level1","level2","watch","edited","scaleUp","methods","val","__exports__","mounted","$el","srcObject","getMediaStream","SDK_VERSION","PROVISIONING_SERVER_URL","__awaiter","thisArg","_arguments","P","generator","adopt","reject","fulfilled","step","rejected","done","hash","TextEncoder","hashArray","crypto","subtle","digest","x","padStart","isInteger","isSafeInteger","isFinite","abs","JsonRpc","jsonrpc","serialize","RequestObject","params","NotificationObject","SuccessObject","ErrorObject","JsonRpcParsed","JsonRpcError","object","validateMessage","notification","isString","invalidRequest","jsonrpcObj","parseError","parseJsonRpcObject","parseObject","parsedObjectArray","methodNotFound","invalidParams","internalError","payloadType","tmp","errorObj","throwIt","checkId","checkMethod","checkParams","checkResult","checkError","maybeNull","isObject","Indexer","indexer","LogLevel","verbose","trace","debug","information","warning","LogSender","keepAliveInterval","token","logLevelNumber","createWebSocket","WebSocket","userInfo","sdkVersion","platform","platformVersion","osName","osVersion","deviceModel","clearTimer","setInterval","setLevel","config","log_level","body","isLog","logs","stringified","CONNECTING","CLOSED","CLOSING","_b","_c","OPEN","clearInterval","logLevel","loggerSender","info","toNowDateString","year","getFullYear","month","getMonth","date","getDate","hour","getHours","getMinutes","sec","getSeconds","millisecond","getMilliseconds","toISOString","toMsgString","log","logger","console","Loggable","target","propertyKey","descriptor","originalMethod","ErrorExecption","setPrototypeOf","getCode","getMessage","ServerError","ClientError","HttpWithJSONRpc","setHost","setHeaders","httpMethod","res","fetch","json","__decorate","decorators","desc","d","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","AuthApiClient","authorize","authConfig","internally","externally","refreshToken","oldToken","response","serviceId","serviceKey","secret","scheme","firstParams","firstResponse","nonce","ha","secondParams","secondResponse","RoomApiClient","audioOption","setRoomId","roomId","setParticipantId","participantId","sendEnterRoom","sign","sendCreateSession","direction","sdp","sendAddCandidate","candidate","sendRestartIce","sendDestroySession","JSONRpc","methodMap","Map","toStream","warn","handleMessage","parsedObjects","handleParsedObject","parsedObject","hasId","hasMethod","requestObject","noop","Session","apiClient","restartIceInterval","cpuOveruseDetection","maxFramerate","h","roomApiClient","dataChannel","rtcConfig","createPeerConnection","createDataChannel","peerConnection","_rtcConfig","bundlePolicy","iceTransportPolicy","rtcpMuxPolicy","iceCandidatePoolSize","sdpSemantics","extmapAllowMixed","opt","optional","enableDscp","googCpuOveruseDetection","googCpuOveruseEncodeUsage","googCpuUnderuseThreshold","googCpuOveruseThreshold","RTCPeerConnection","onicecandidate","ice","onnegotiationneeded","offer","createOffer","setLocalDescription","answer","RTCSessionDescription","setRemoteDescription","onconnectionstatechange","connectionState","_restartIceTimerStop","_restartIceTimerStart","oniceconnectionstatechange","iceConnectionState","ontrack","Response","text","onLine","_restartIce","iceRestart","DownSession","receiverTrackMap","fixedAudioReceiver","addListeners","negotiationId","receivers","createAnswer","callSetAnswer","transceivers","getTransceivers","transceiver","receiverId","mid","receiver","track","kind","filter","getTrack","addReceiver","find","callAddReceiver","getFixedAudioReceiver","removeReceiver","receiverIds","callRemoveReceiver","assignStream","callAssignStream","configureReceiver","_callConfigureReceiver","UpSession","streamIdMidMap","addStream","audioType","audioTrack","audioExtraValue","videoType","localVideo","videoExtraValue","videoHd","record","audio","audioOffer","videoOffer","_replaceAudioTrack","_replaceVideoTrack","_setVideoProfiles","_callSetAnswer","streamId","default","profiles","profile","_callAddStream","extraValue","hd","configureStream","streams","_callConfigureStream","removeStream","streamIds","_removeTracks","_callRemoveStream","_replaceVideoProfiles","audioTransceiver","t","sender","replaceTrack","videoTransceiver","getMediaStreamTrack","cloneTrack","getCloneTrack","stream","getParameters","encodings","setParameters","removeTrack","maxBitrate","bitrate","some","filterToArray","filtered","objectToArray","values","Remote","getParticipantId","getExtraValue","_setExtraValue","_setParticipantId","videoId","paused","statusUpdateFn","videoElements","isEnabled","mediaStreamTrack","enabled","setMediaStreamEnabled","_setType","_setRemoteTrack","attach","element","videoElement","createElement","mediaStream","detach","remove","stop","MediaStream","getVideoId","_setVideoId","_setReceiverId","_setActive","setPaused","setQuality","quality","RemoteAudio","audioId","isAlwaysOn","property","alwaysOn","getAudioId","_setAlwaysOn","RemoteParticipant","trackFn","streamIdMap","audioMap","videoMap","getTrackFn","media","hasAudio","s","hasVideo","audios","remoteAudios","remoteVideos","isEnabledVideo","isEnabledAudio","_getSubscribedStreamIds","_getFilterStreamIds","assigned","_getUnsubscribedStreamIds","notAssigned","getSubscribedVideos","videoStreams","_getFilterStreams","getUnsubscribedVideos","getAudio","getVideo","_getVideoStreamIdAll","_getVideoStreamAll","videoTracks","_","_addStream","_updateStream","_removeStream","LocalParticipant","setLocalAudio","setLocalVideo","setLocalParticipantId","makeArray","fill","Local","getStreamId","setExtraValue","setEnabled","_setStreamId","LocalVideo","cloneMediaStreamTrack","setHd","flag","clone","LocalAudio","setAlwaysOn","LocalMedia","constraints","conf","mediaDevices","enumerateDevices","getMicDevices","getSpeakerDevices","getCameraDevices","switchCamera","exact","unpublish","getUserMedia","videoTrack","getVideoTracks","muted","publish","switchMic","getAudioTracks","setConference","setMediaStream","RemoteAudioElements","audioReceivers","audioElements","_setReceivers","audioReceiver","audioElement","_getMediaStream","addTrack","RoomEventName","LocalScreen","switchDisplay","getDisplayMedia","__rest","propertyIsEnumerable","ConnectionStep","ENTERROOM","UPSESSION","DOWNSESSION","TOTALSTEP","Conference","authResponse","participantMap","receiverMap","audioStreamIdMap","videoReceiverInitialCount","videoReceiverGrowthRate","videoReceiverMaximumCount","audioOccupants","audioLvlUpdateTs","subscribeStreamIdsQueue","unsubscribeStreamIdsQueue","streamIdsQueueInterval","isStreamIdsQueueWorking","upSession","downSession","localParticipant","remoteAudioElements","roomStatus","_dispatch","ERROR","RECORDFAILED","apiServerUrl","api","httpHeaders","Authorization","remoteParticipants","_handleParticipantsInfo","_handleReceivers","progress","iceServers","lastData","removeVideo","_assignVideoStream","DISCONNECTED","localMedias","isRecording","promise","localAudio","LOCALAUDIOPUBLISHED","LOCALVIDEOPUBLISHED","promiseArr","localMedia","all","subscribe","participantOrStreamIds","unsubscribedStreamIds","intersection","_checkAlreadySubscribe","unsubscribe","videoStreamIds","assignedStreamMap","entries","streamMap","getParticipant","getAudioOccupants","getRemoteVideo","remoteParticipant","getRemoteAudio","remoteAudio","_streamIds","includes","_checkMaxReceiverCount","currentCount","_getCurrentReceiverCount","currentVideoSize","_setReceiverPool","videoSize","receiverCount","currentReceiverCount","remoteVideoTrack","found","change","fullData","participantsEnter","PARTICIPANTENTERED","participantsLeave","PARTICIPANTLEFT","remoteParticipantId","streamsAdded","audioStreams","audioStream","REMOTEAUDIOPUBLISHED","videoStream","REMOTEVIDEOPUBLISHED","streamsUpdated","REMOTEAUDIOSTATECHANGED","REMOTEVIDEOSTATECHANGED","streamsRemoved","LOCALAUDIOUNPUBLISHED","LOCALVIDEOUNPUBLISHED","REMOTEAUDIOUNPUBLISHED","REMOTEVIDEOUNPUBLISHED","lvl","LOCALAUDIOLEVELUPDATED","REMOTEAUDIOLEVELUPDATED","_participant","_receiverId","_streamId","REMOTEAUDIOUNSUBSCRIBED","REMOTEAUDIOSUBSCRIBED","participants","appendChild","CONNECTED","getRemoteAudioLevels","levels","lastTimestamp","sc","getContributingSources","ss","timestamp","audioLevel","switchSpeaker","setSinkId","catch","promises","ConnectLive","eventName","ttl","restTtl","authApiClient","_startAuthTimer","authRefreshTimer","signOut","cnl","vendor","architecture","localScreen","components","voiceMeter","setup","confName","isConnected","myId","cameraDevices","audioCheckInterval","onProvisioning","onConnect","onCreateLocalMedia","onCreateConference","audioLevels","audioParticipant","parseFloat","toFixed","className","width","querySelector","onCreateLocalScreen","unsubscribedVideos","videoIds","findIndex","onDisConnectConference","onDestroyLocalScreen","onChangeCamera","camaraSource","getElementById","onClickSpotlight","dataset","participantid","parseInt","videoid","ConnectLiveConf","store","useStore","socketDns","socket2","inputMessage","iframeAreaEl","connectAreaEl","chatPageEl","btnAreaEl","messagesEl","freezeEl","inputMessageEl","showQuizEl","isConnectLiveConf","onMounted","localStorage","getItem","getUsersEncryptFunc","getUsersDecryptFunc","initUserData","iframeHideFunc","sendType","socketId","socketId2","userName","userSn","channelNo","lrnerId","accTy","messageType","sendUserName","sendMessage","sendDisconnect","li","innerText","append","getRedisUsersList","display","scrollTop","scrollHeight","removeItem","reload","userinfo","innerHTML","iframeShowFunc","connectLiveShowFunc","alert","connectLiveFunc","showQuiz","showIframe","hideIframe","youtubeFunc","freezeFunc","updateTyping","typing","lastTypingTime","getTime","typingTimer","timeDiff","dispatch","ACT_GET_USERS_DECRYPT","lrnerNm","route","useRoute","router","useRouter","moveFunc","setItem","encrypt","rou","ACT_GET_USERS_ENCRYPT","render"],"sourceRoot":""}